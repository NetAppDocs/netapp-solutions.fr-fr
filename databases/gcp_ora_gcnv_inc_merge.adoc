---
sidebar: sidebar 
permalink: databases/gcp_ora_gcnv_inc_merge.html 
keywords: Oracle, GCP, GCNV, Database, NFS, dNFS, VLDB, RMAN, Incremental Merge 
summary: 'La solution fournit une vue d"ensemble et des détails pour une récupération rapide d"Oracle VLDB déployé sur la machine virtuelle Google Compute Engine avec montage NFS sur le pool de stockage Google Cloud NetApp Volumes pour mettre en scène une copie de base de données de secours qui est fusionnée de manière incrémentielle en permanence via RMAN.' 
---
= TR-5007 : Optimiser la sauvegarde et la récupération Oracle VLDB avec la fusion incrémentielle sur serveur sur les volumes NetApp de Google Cloud
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


Allen Cao, Niyaz Mohamed, NetApp

[role="lead"]
La solution fournit une vue d'ensemble et des détails pour une récupération rapide d'Oracle VLDB déployé sur la machine virtuelle Google Compute Engine avec montage NFS sur le pool de stockage Google Cloud NetApp Volumes pour mettre en scène une copie de base de données de secours qui est fusionnée de manière incrémentielle en permanence via RMAN.



== Objectif

La restauration d'une base de données très volumineuse (VLDB) dans Oracle à l'aide de l'outil de sauvegarde Oracle Recovery Manager (RMAN) peut s'avérer très complexe. En cas de défaillance, le processus de restauration de la base de données à partir du support de sauvegarde peut prendre beaucoup de temps, ce qui retarde la restauration de la base de données et peut avoir un impact significatif sur votre contrat de niveau de service. La situation se complique encore pour les bases de données Oracle VLDB déployées dans le cloud, car la sauvegarde RMAN est généralement transférée vers le stockage objet pour des raisons de coût. Par conséquent, la restauration et la récupération d'une base de données VLDB sont impossibles si un accord de niveau de service (SLA) est essentiel. À partir de la version 10g, Oracle a introduit une fonctionnalité RMAN permettant aux utilisateurs de créer des copies image intermédiaires des fichiers de données Oracle sur un espace disque supplémentaire situé sur l'hôte du serveur de base de données. Ces copies image peuvent être mises à jour progressivement via RMAN à un intervalle défini par l'utilisateur. En cas de défaillance, l'administrateur de base de données (DBA) peut rapidement basculer la base de données Oracle du support défaillant vers la copie d'image, éliminant ainsi la nécessité d'une restauration complète des supports de base de données. Il en résulte un contrat de niveau de service considérablement amélioré, mais au prix de doubler le stockage de base de données requis.

Si vous souhaitez un contrat de niveau de service (SLA) pour votre base de données VLDB et envisagez de migrer la base de données Oracle vers un cloud public tel que Google Cloud Platform (GCP), vous pouvez mettre en place une structure de protection de base de données similaire en utilisant des ressources telles que Google Cloud NetApp Volumes (GCNV) pour la préparation de votre copie d'image de base de données de secours. GCNV est un service de stockage de fichiers hautes performances entièrement géré proposé par Google. Il simplifie, sécurise et optimise les coûts de migration et d'exécution d'applications d'entreprise exigeantes, telles que la base de données Oracle, vers Google Cloud. Ses différents niveaux de service offrent une grande flexibilité pour maîtriser les coûts de stockage, tout en atteignant un RPO proche de zéro et un RTO gérable. Dans cette documentation, nous montrons comment provisionner et exporter un système de fichiers NFS depuis un pool de stockage GCNV afin de le monter sur un serveur de base de données Oracle pour préparer une copie de base de données de secours et une récupération rapide en cas de panne du stockage principal.

Cette solution répond aux cas d'utilisation suivants :

* Sauvegarde de copie d'image des fichiers de données de base de données Oracle via RMAN vers un système de fichiers NFS sur serveur sur un pool de stockage Google Cloud NetApp Volumes.
* Récupération rapide d'un Oracle VLDB en cas de panne sur la même VM Google Compute Engine ou sur une VM de secours.
* Clonez une copie de base de données Oracle sur un hôte clone pour d'autres cas d'utilisation à partir de la copie d'image de base de données intermédiaire en quelques minutes.




== Public

Cette solution est destinée aux personnes suivantes :

* Un administrateur de base de données qui configure et gère Oracle VLDB dans la plateforme Google Cloud.
* Un architecte de solutions de base de données qui teste les charges de travail Oracle dans la plateforme Google Cloud.
* Un administrateur de stockage qui gère les bases de données Oracle déployées sur les pools de stockage GCNV.
* Un propriétaire d’application qui souhaite mettre en place des bases de données Oracle dans Google Cloud Platform.




== Environnement de test et de validation de la solution

Les tests et la validation de cette solution ont été effectués dans des pools de stockage Google Cloud NetApp Volumes et des machines virtuelles Google Compute Engine qui pourraient ne pas correspondre à l'environnement de déploiement final. Pour plus d'informations, reportez-vous à la section <<Facteurs clés à prendre en compte lors du déploiement>>.



=== Architecture

image:gcp_ora_gcnv_inc_merge_archit.png["Cette image fournit une image détaillée de l'implémentation de la fusion incrémentielle Oracle VLDB dans Google Cloud avec GCNV."]



=== Composants matériels et logiciels

[cols="33%, 33%, 33%"]
|===


3+| *Matériel* 


| Pools de stockage Google Cloud NetApp Volumes | Services actuels offerts par Google | Pool de stockage de 2 Tio avec service Premium, pool de stockage de 2 Tio avec service standard 


| Machine virtuelle Google Compute Engine pour serveur de base de données | N1 (4 vcpu, 15 Gio de mémoire) | 2 machines virtuelles, une comme serveur de base de données principal et l'autre comme serveur de base de données de secours ou clone 


3+| *Logiciel* 


| Red Hat Linux | Red Hat Enterprise Linux 8.10 (Ootpa) - x86/64 | Image RHEL Marketplace, PAYG 


| Infrastructure Oracle Grid | Version 19.18 | Patch RU appliqué p34762026_190000_Linux-x86-64.zip 


| Base de données Oracle | Version 19.18 | Patch RU appliqué p34765931_190000_Linux-x86-64.zip 


| Correctif logiciel dNFS oneoff | p32931941_190000_Linux-x86-64.zip | Appliqué à la grille et à la base de données 


| OPICH Oracle | Version 12.2.0.1.36 | Dernier correctif p6880880_190000_Linux-x86-64.zip 


| NFS | Version 3.0 | Oracle dNFS activé 


| Ansible | Version Core 2.16.2 | version python - 3.10.13 
|===


=== Facteurs clés à prendre en compte lors du déploiement

* *Niveau de service du pool de stockage GCNV.* Le pool de stockage GCNV propose quatre niveaux de service : Standard, Premium, Extreme et Flex. Par défaut, une QoS automatique s'applique à un volume créé au sein d'un pool de stockage, ce qui limite le débit du volume en fonction de sa taille et du niveau de service. La seule exception est que les volumes alloués depuis le pool de stockage Flex partagent le débit disponible pour ce dernier.
* *Limite de stockage de sauvegarde Oracle VLDB sur serveur pour la fusion incrémentielle RMAN.* Lors de nos tests et validations, un volume NFS pour la sauvegarde et la fusion incrémentielles Oracle est alloué à partir d'un pool de stockage GCNV unique avec un niveau de service standard, dont la capacité est limitée à 200 Tio. Pour un déploiement dépassant ces seuils, plusieurs pools de stockage GCNV peuvent être implémentés en parallèle avec plusieurs points de montage NFS afin d'offrir une capacité supérieure.
* *Récupération Oracle grâce à la fusion incrémentielle RMAN.* La sauvegarde et la fusion incrémentielles RMAN sur serveur sont généralement exécutées à une fréquence définie par l'utilisateur, en fonction de vos objectifs de RTO et de RPO. En cas de perte totale du stockage des fichiers de la base de données principale et/ou des journaux archivés, des pertes de données peuvent survenir. La base de données Oracle peut être restaurée jusqu'à la dernière sauvegarde incrémentielle disponible à partir de l'image de sauvegarde de la base de données sur serveur. Pour minimiser les pertes de données, la zone de récupération flash Oracle doit être configurée sur le point de montage de sauvegarde NFS GCNV, et les journaux archivés sont sauvegardés sur le même montage NFS, avec l'image de la base de données, afin de restaurer la base de données jusqu'au dernier journal archivé en cas de panne. Ainsi, un RPO proche de zéro peut être atteint.
* *Exécution d'Oracle VLDB à partir d'une sauvegarde d'image NFS sur un pool de stockage GCNV.* À ce stade, la réaffectation du niveau de service du volume de base de données de Standard à Premium ou Extreme n'est pas prise en charge. Cependant, la réaffectation des niveaux de service de Premium à Extreme est prise en charge. Pour exécuter la base de données sur une copie d'image pendant une période prolongée après une panne, il est recommandé d'allouer un volume du pool de stockage Premium pour la sauvegarde de la copie d'image de la base de données.
* *Machines virtuelles Google Compute Engine*. Lors des tests et de la validation, nous avons utilisé une instance de machine virtuelle GCE de type N1 comme serveurs de base de données Oracle. D'autres types de machines virtuelles GCE peuvent être plus optimisés et mieux adaptés à la charge de travail des bases de données. Dimensionnez la machine virtuelle en fonction du nombre de processeurs virtuels et de la quantité de RAM, en fonction des besoins réels de la charge de travail.
* *Configuration dNFS*. dNFS est intégré au noyau Oracle et améliore considérablement les performances des bases de données Oracle lorsqu'Oracle est déployé sur un stockage NFS. dNFS est intégré au binaire Oracle, mais n'est pas activé par défaut. Il doit être activé pour tout déploiement de base de données Oracle sur NFS. Pour le déploiement de plusieurs pools de stockage GCNV pour une base de données VLDB, les chemins d'accès multiples dNFS vers différents pools de stockage GCNV doivent être correctement configurés.




== Déploiement de la solution

La solution suppose qu'une base de données Oracle VLDB est déjà déployée dans l'environnement Google Cloud au sein d'un VPC. Cette base de données peut s'exécuter sur le stockage GCNV ou sur toute autre option de stockage de l'écosystème Google Cloud. La section suivante décrit les procédures de déploiement étape par étape pour configurer une sauvegarde d'image Oracle VLDB et une fusion incrémentielle via RMAN vers un système de fichiers NFS monté à partir d'un pool de stockage GCNV. Le stockage principal de la base de données Oracle VLDB est également hébergé sur un autre pool de stockage GCNV.



=== Conditions préalables au déploiement

[%collapsible%open]
====
Le déploiement nécessite les conditions préalables suivantes.

. Un compte GCP a été configuré et la configuration VPC et réseau nécessaire a été créée dans un projet dans le compte Google Cloud.
. Depuis la console du portail Google Cloud, suivez la documentation link:https://cloud.google.com/netapp/volumes/docs/configure-and-use/storage-pools/create-storage-pool["Créer un pool de stockage"^] pour créer un pool de stockage GCNV avec un service standard comme indiqué ci-dessous.
+
image:gcp_ora_gcnv_inc_merge_pool_01.png["Cette image présente l'écran du pool de stockage GCNV de la console du portail cloud de Google"]

. Depuis la console du portail Google Cloud, suivez la documentation link:https://cloud.google.com/netapp/volumes/docs/configure-and-use/volumes/create-volume["Créer un volume"^] Créer un volume pour la sauvegarde d'image Oracle VLDB sur serveur. Dans cette démonstration, le stockage principal Oracle VLDB est également hébergé sur GCNV, comme illustré ci-dessous.
+
image:gcp_ora_gcnv_inc_merge_vol_02.png["Cette image présente l'écran des volumes de stockage GCNV de la console du portail cloud de Google"]



====


=== Monter un volume NFS de GCNV sur le serveur Oracle VLDB principal

[%collapsible%open]
====
Le volume GCNV provisionné pour la sauvegarde sur serveur Oracle VLDB doit idéalement être situé dans la même zone Google Cloud que le serveur de base de données principal et le stockage principal pour de meilleures performances.

. Récupérez le chemin d’exportation NFS du volume GCNV à partir de la console Google Cloud.
+
image:gcp_ora_gcnv_inc_merge_vol_03.png["Cette image présente l'écran des volumes de stockage GCNV de la console du portail cloud de Google"]

. Connectez-vous au serveur Oracle VLDB principal. En tant qu'utilisateur root, montez le volume NFS exporté depuis le stockage GCNV. Modifiez l'adresse IP et le chemin d'accès au fichier de votre serveur NFS si nécessaire.
+
[source, cli]
----
sudo mkdir /nfsgcnv
----
+
[source, cli]
----
mount 10.165.128.5:/orap-bkup /nfsgcnv -o rw,bg,hard,vers=3,proto=tcp,timeo=600,rsize=262144,wsize=262144
----
. Modifiez la propriété du point de montage sur oracle:oisntall ou modifiez votre nom d'utilisateur Oracle et votre groupe principal si nécessaire.
+
[source, cli]
----
sudo chown oracle:oinstall /nfsgcnv
----
. Ajoutez le montage NFS à /etc/fstab.
+
[source, cli]
----
sudo vi /etc/fstab
----


====


=== Configurer la fusion incrémentielle Oracle RMAN pour copier l'image sur GCNV pour la sauvegarde VLDB sur le serveur

[%collapsible%open]
====
La fusion incrémentielle RMAN met à jour la copie d'image des fichiers de données de la base de données intermédiaire en continu à chaque intervalle de sauvegarde/fusion incrémentielle. La copie d'image de la sauvegarde de la base de données sera aussi à jour que la fréquence d'exécution de la sauvegarde/fusion incrémentielle. Prenez donc en compte les performances de la base de données ainsi que vos objectifs RTO et RPO lors du choix de la fréquence de fusion et de sauvegarde incrémentielle RMAN.

. Connectez-vous au serveur Oracle VLDB principal en tant qu'utilisateur oracle.
. Pour la validation de cette solution, la base de données principale est configurée comme un serveur autonome avec une infrastructure en grille. La configuration de redémarrage est illustrée ci-dessous. Le stockage principal est hébergé sur le pool de stockage GCNV avec un service premium. Ce n'est pas obligatoire et le stockage principal peut être hébergé sur n'importe quelle autre option de stockage Google Cloud.
+
....

[oracle@orap ~]$ df -h
Filesystem               Size  Used Avail Use% Mounted on
devtmpfs                 7.2G     0  7.2G   0% /dev
tmpfs                    7.3G  1.1G  6.2G  16% /dev/shm
tmpfs                    7.3G  8.5M  7.2G   1% /run
tmpfs                    7.3G     0  7.3G   0% /sys/fs/cgroup
/dev/sda2                 50G   22G   29G  43% /
/dev/sda1                200M  5.9M  194M   3% /boot/efi
10.165.128.5:/orap-u02   250G  203G   48G  81% /u02
10.165.128.5:/orap-u07   250G  203G   48G  82% /u07
10.165.128.5:/orap-u06   250G  203G   48G  81% /u06
10.165.128.5:/orap-u04   250G  203G   48G  81% /u04
10.165.128.5:/orap-u05   250G  203G   48G  82% /u05
10.165.128.5:/orap-bkup  2.0T  918G  1.2T  45% /nfsgcnv
10.165.128.5:/orap-u03   250G  202G   49G  81% /u03
10.165.128.4:/orap-u01   200G   21G  180G  11% /u01
10.165.128.5:/orap-u08   300G  201G  100G  67% /u08
tmpfs                    1.5G     0  1.5G   0% /run/user/54321

[oracle@orap ~]$ crsctl stat res -t
--------------------------------------------------------------------------------
Name           Target  State        Server                   State details
--------------------------------------------------------------------------------
Local Resources
--------------------------------------------------------------------------------
ora.DATA.dg
               ONLINE  ONLINE       orap                     STABLE
ora.LISTENER.lsnr
               ONLINE  ONLINE       orap                     STABLE
ora.LOGS.dg
               ONLINE  ONLINE       orap                     STABLE
ora.asm
               ONLINE  ONLINE       orap                     Started,STABLE
ora.ons
               OFFLINE OFFLINE      orap                     STABLE
--------------------------------------------------------------------------------
Cluster Resources
--------------------------------------------------------------------------------
ora.cssd
      1        ONLINE  ONLINE       orap                     STABLE
ora.diskmon
      1        OFFLINE OFFLINE                               STABLE
ora.evmd
      1        ONLINE  ONLINE       orap                     STABLE
ora.ntap.db
      1        ONLINE  ONLINE       orap                     Open,HOME=/u01/app/o
                                                             racle/product/19.0.0
                                                             /NTAP,STABLE
--------------------------------------------------------------------------------


[oracle@orap ~]$ asmcmd
ASMCMD> lsdg
State    Type    Rebal  Sector  Logical_Sector  Block       AU  Total_MB  Free_MB  Req_mir_free_MB  Usable_file_MB  Offline_disks  Voting_files  Name
MOUNTED  EXTERN  N         512             512   4096  4194304   1228800  1150288                0         1150288              0             N  DATA/
MOUNTED  EXTERN  N         512             512   4096  4194304    204800   204636                0          204636              0             N  LOGS/
ASMCMD> lsdsk
Path
/u02/oradata/asm/orap_data_disk_01
/u02/oradata/asm/orap_data_disk_02
/u02/oradata/asm/orap_data_disk_03
/u02/oradata/asm/orap_data_disk_04
/u03/oradata/asm/orap_data_disk_05
/u03/oradata/asm/orap_data_disk_06
/u03/oradata/asm/orap_data_disk_07
/u03/oradata/asm/orap_data_disk_08
/u04/oradata/asm/orap_data_disk_09
/u04/oradata/asm/orap_data_disk_10
/u04/oradata/asm/orap_data_disk_11
/u04/oradata/asm/orap_data_disk_12
/u05/oradata/asm/orap_data_disk_13
/u05/oradata/asm/orap_data_disk_14
/u05/oradata/asm/orap_data_disk_15
/u05/oradata/asm/orap_data_disk_16
/u06/oradata/asm/orap_data_disk_17
/u06/oradata/asm/orap_data_disk_18
/u06/oradata/asm/orap_data_disk_19
/u06/oradata/asm/orap_data_disk_20
/u07/oradata/asm/orap_data_disk_21
/u07/oradata/asm/orap_data_disk_22
/u07/oradata/asm/orap_data_disk_23
/u07/oradata/asm/orap_data_disk_24
/u08/oralogs/asm/orap_logs_disk_01
/u08/oralogs/asm/orap_logs_disk_02
/u08/oralogs/asm/orap_logs_disk_03
/u08/oralogs/asm/orap_logs_disk_04


....
. Créez un répertoire oracopy sous le point de montage /nfsgcnv pour stocker les copies d'image des fichiers de données Oracle et un répertoire archlog pour la zone de récupération flash Oracle.
+
[source, cli]
----
mkdir /nfsgcnv/oracopy
----
+
[source, cli]
----
mkdir /nfsgcnv/archlog
----
. Connectez-vous à la base de données Oracle via sqlplus, activez le suivi des modifications de blocs pour une sauvegarde incrémentielle plus rapide et remplacez la zone de restauration Flash Oracle par un montage NFS GCNV si celle-ci est actuellement sur le stockage primaire. Cela permet de sauvegarder le fichier de contrôle par défaut RMAN/SPfile et les journaux archivés automatiquement sur le montage NFS GCNV pour la récupération de la base de données vers le dernier journal d'archive disponible.
+
[source, cli]
----
sqlplus / as sysdba
----
+
À partir de l'invite sqlplus, exécutez la commande suivante.

+
[source, cli]
----
alter database enable block change tracking using file '/nfsgcnv/oracopy/bct_ntap.ctf'
----
+
[source, cli]
----
alter system set db_recovery_file_dest='/nfsgcnv/archlog/' scope=both;
----
+
Sortie attendue :

+
....
[oracle@orap ~]$ sqlplus / as sysdba

SQL*Plus: Release 19.0.0.0.0 - Production on Wed Mar 20 16:44:21 2024
Version 19.18.0.0.0

Copyright (c) 1982, 2022, Oracle.  All rights reserved.

Connected to:
Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.18.0.0.0

SQL> alter database enable block change tracking using file '/nfsgcnv/oracopy/bct_ntap.ctf';

Database altered.

SQL> alter system set db_recovery_file_dest='/nfsgcnv/archlog/' scope=both;

System altered.

SQL> alter system set db_recovery_file_dest_size = 400G scope=both;

System altered.

SQL> show parameter recover

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
db_recovery_file_dest                string      /nfsgcnv/archlog/
db_recovery_file_dest_size           big integer 400G
db_unrecoverable_scn_tracking        boolean     TRUE
recovery_parallelism                 integer     0
remote_recovery_file_dest            string
SQL>

....
. Créez une sauvegarde RMAN et un script de fusion incrémentielle. Le script alloue plusieurs canaux pour la sauvegarde et la fusion RMAN parallèles. La première exécution génère la copie initiale de l'image de base complète. Lors d'une exécution complète, il supprime d'abord les sauvegardes obsolètes qui sont en dehors de la fenêtre de conservation pour maintenir la zone de stockage temporaire propre. Il bascule ensuite le fichier journal actuel avant la fusion et la sauvegarde. La sauvegarde incrémentielle suit la fusion de sorte que la copie de l'image de base de données suit l'état actuel de la base de données par un cycle de sauvegarde/fusion. L'ordre de fusion et de sauvegarde peut être inversé pour une restauration plus rapide selon les préférences de l'utilisateur. Le script RMAN peut être intégré dans un script shell simple à exécuter à partir de crontab sur le serveur de base de données principal. Assurez-vous que la sauvegarde automatique du fichier de contrôle est activée dans le paramètre RMAN.
+
....
vi /home/oracle/rman_bkup_merge.cmd

Add following lines:

RUN
{
  allocate channel c1 device type disk format '/nfsgcnv/oracopy/%U';
  allocate channel c2 device type disk format '/nfsgcnv/oracopy/%U';
  allocate channel c3 device type disk format '/nfsgcnv/oracopy/%U';
  allocate channel c4 device type disk format '/nfsgcnv/oracopy/%U';
  delete obsolete;
  sql 'alter system archive log current';
  recover copy of database with tag 'OraCopyBKUPonGCNV_level_0';
  backup incremental level 1 copies=1 for recover of copy with tag 'OraCopyBKUPonGCNV_level_0' database;
}


....
. Sur le serveur primaire Oracle VLDB, connectez-vous localement à RMAN en tant qu'utilisateur oracle avec ou sans catalogue RMAN. Dans cette démonstration, nous ne nous connectons pas à un catalogue RMAN.
+
....

rman target / nocatalog;

output:

[oracle@orap ~]$ rman target / nocatalog

Recovery Manager: Release 19.0.0.0.0 - Production on Wed Mar 20 16:54:24 2024
Version 19.18.0.0.0

Copyright (c) 1982, 2019, Oracle and/or its affiliates.  All rights reserved.

connected to target database: NTAP (DBID=1379265854)
using target database control file instead of recovery catalog

....
. À partir de l'invite RMAN, exécutez le script. La première exécution crée une copie d'image de base de données et les exécutions suivantes fusionnent et mettent à jour la copie d'image de base de manière incrémentielle. Voici comment exécuter le script et la sortie type. Définissez le nombre de canaux correspondant aux cœurs de processeur de l'hôte.
+
....

RMAN> @/home/oracle/rman_bkup_merge.cmd

RMAN> RUN
2> {
3>   allocate channel c1 device type disk format '/nfsgcnv/oracopy/%U';
4>   allocate channel c2 device type disk format '/nfsgcnv/oracopy/%U';
5>   allocate channel c3 device type disk format '/nfsgcnv/oracopy/%U';
6>   allocate channel c4 device type disk format '/nfsgcnv/oracopy/%U';
7>   delete obsolete;
8>   sql 'alter system archive log current';
9>   recover copy of database with tag 'OraCopyBKUPonGCNV_level_0';
10>   backup incremental level 1 copies=1 for recover of copy with tag 'OraCopyBKUPonGCNV_level_0' database;
11> }
allocated channel: c1
channel c1: SID=23 device type=DISK

allocated channel: c2
channel c2: SID=151 device type=DISK

allocated channel: c3
channel c3: SID=20 device type=DISK

allocated channel: c4
channel c4: SID=150 device type=DISK

RMAN retention policy will be applied to the command
RMAN retention policy is set to redundancy 1
Deleting the following obsolete backups and copies:
Type                 Key    Completion Time    Filename/Handle
-------------------- ------ ------------------ --------------------
Backup Set           1      22-MAY-25
  Backup Piece       1      22-MAY-25          +LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201793914.260.1201793917
Backup Set           2      22-MAY-25
  Backup Piece       2      22-MAY-25          +LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201795422.261.1201795425
Backup Set           3      22-MAY-25
  Backup Piece       3      22-MAY-25          +LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201797230.262.1201797231
Backup Set           4      22-MAY-25
  Backup Piece       4      22-MAY-25          +LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201799039.264.1201799041
Backup Set           5      22-MAY-25
  Backup Piece       5      22-MAY-25          +LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201802655.265.1201802659
Backup Set           6      22-MAY-25
  Backup Piece       6      22-MAY-25          +LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201803558.266.1201803561
Backup Set           7      22-MAY-25
  Backup Piece       7      22-MAY-25          +LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201805066.267.1201805069
Backup Set           8      22-MAY-25
  Backup Piece       8      22-MAY-25          +LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201806272.268.1201806275
Backup Set           9      22-MAY-25
  Backup Piece       9      22-MAY-25          +LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201807778.269.1201807781
Backup Set           10     23-MAY-25
  Backup Piece       10     23-MAY-25          +LOGS/NTAP/AUTOBACKUP/2025_05_23/s_1201874668.271.1201874669
deleted backup piece
backup piece handle=+LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201793914.260.1201793917 RECID=1 STAMP=1201793917
deleted backup piece
backup piece handle=+LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201799039.264.1201799041 RECID=4 STAMP=1201799040
deleted backup piece
backup piece handle=+LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201795422.261.1201795425 RECID=2 STAMP=1201795424
deleted backup piece
backup piece handle=+LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201803558.266.1201803561 RECID=6 STAMP=1201803561
deleted backup piece
backup piece handle=+LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201797230.262.1201797231 RECID=3 STAMP=1201797231
deleted backup piece
backup piece handle=+LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201802655.265.1201802659 RECID=5 STAMP=1201802658
deleted backup piece
backup piece handle=+LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201805066.267.1201805069 RECID=7 STAMP=1201805069
Deleted 2 objects

deleted backup piece
backup piece handle=+LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201806272.268.1201806275 RECID=8 STAMP=1201806275
Deleted 3 objects

deleted backup piece
backup piece handle=+LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201807778.269.1201807781 RECID=9 STAMP=1201807780
Deleted 2 objects

deleted backup piece
backup piece handle=+LOGS/NTAP/AUTOBACKUP/2025_05_23/s_1201874668.271.1201874669 RECID=10 STAMP=1201874669
Deleted 3 objects


sql statement: alter system archive log current

Starting recover at 23-MAY-25
no copy of datafile 1 found to recover
no copy of datafile 3 found to recover
no copy of datafile 4 found to recover
no copy of datafile 5 found to recover
no copy of datafile 6 found to recover
no copy of datafile 7 found to recover
no copy of datafile 8 found to recover
no copy of datafile 9 found to recover
no copy of datafile 10 found to recover
no copy of datafile 11 found to recover
no copy of datafile 12 found to recover
no copy of datafile 13 found to recover
no copy of datafile 14 found to recover
no copy of datafile 15 found to recover
no copy of datafile 16 found to recover
no copy of datafile 17 found to recover
no copy of datafile 18 found to recover
no copy of datafile 19 found to recover
no copy of datafile 20 found to recover
no copy of datafile 21 found to recover
no copy of datafile 22 found to recover
no copy of datafile 23 found to recover
no copy of datafile 24 found to recover
no copy of datafile 25 found to recover
no copy of datafile 26 found to recover
no copy of datafile 27 found to recover
no copy of datafile 28 found to recover
no copy of datafile 29 found to recover
no copy of datafile 30 found to recover
no copy of datafile 31 found to recover
no copy of datafile 32 found to recover
no copy of datafile 33 found to recover
no copy of datafile 34 found to recover
no copy of datafile 35 found to recover
no copy of datafile 36 found to recover
no copy of datafile 37 found to recover
no copy of datafile 38 found to recover
no copy of datafile 39 found to recover
no copy of datafile 40 found to recover
no copy of datafile 41 found to recover
no copy of datafile 42 found to recover
no copy of datafile 43 found to recover
no copy of datafile 44 found to recover
no copy of datafile 45 found to recover
no copy of datafile 46 found to recover
no copy of datafile 47 found to recover
no copy of datafile 48 found to recover
no copy of datafile 49 found to recover
no copy of datafile 50 found to recover
Finished recover at 23-MAY-25

Starting backup at 23-MAY-25
no parent backup or copy of datafile 1 found
no parent backup or copy of datafile 3 found
no parent backup or copy of datafile 4 found
no parent backup or copy of datafile 7 found
no parent backup or copy of datafile 6 found
no parent backup or copy of datafile 5 found
no parent backup or copy of datafile 8 found
no parent backup or copy of datafile 21 found
no parent backup or copy of datafile 22 found
no parent backup or copy of datafile 25 found
no parent backup or copy of datafile 28 found
no parent backup or copy of datafile 32 found
no parent backup or copy of datafile 33 found
no parent backup or copy of datafile 36 found
no parent backup or copy of datafile 41 found
no parent backup or copy of datafile 44 found
no parent backup or copy of datafile 46 found
no parent backup or copy of datafile 10 found
no parent backup or copy of datafile 9 found
no parent backup or copy of datafile 11 found
no parent backup or copy of datafile 12 found
no parent backup or copy of datafile 23 found
no parent backup or copy of datafile 26 found
no parent backup or copy of datafile 29 found
no parent backup or copy of datafile 30 found
no parent backup or copy of datafile 34 found
no parent backup or copy of datafile 37 found
no parent backup or copy of datafile 39 found
no parent backup or copy of datafile 42 found
no parent backup or copy of datafile 47 found
no parent backup or copy of datafile 48 found
no parent backup or copy of datafile 14 found
no parent backup or copy of datafile 13 found
no parent backup or copy of datafile 15 found
no parent backup or copy of datafile 16 found
no parent backup or copy of datafile 24 found
no parent backup or copy of datafile 27 found
no parent backup or copy of datafile 31 found
no parent backup or copy of datafile 35 found
no parent backup or copy of datafile 38 found
no parent backup or copy of datafile 40 found
no parent backup or copy of datafile 43 found
no parent backup or copy of datafile 45 found
no parent backup or copy of datafile 49 found
no parent backup or copy of datafile 50 found
no parent backup or copy of datafile 18 found
no parent backup or copy of datafile 17 found
no parent backup or copy of datafile 19 found
no parent backup or copy of datafile 20 found
channel c1: starting datafile copy
input datafile file number=00021 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.286.1201793019
channel c2: starting datafile copy
input datafile file number=00022 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.287.1201793419
channel c3: starting datafile copy
input datafile file number=00025 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.290.1201794401
channel c4: starting datafile copy
input datafile file number=00028 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.293.1201795271
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-28_0f3q6gvn tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=4 STAMP=1201886858
channel c4: datafile copy complete, elapsed time: 01:19:26
channel c4: starting datafile copy
input datafile file number=00032 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.297.1201797351
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-25_0e3q6gvn tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=5 STAMP=1201886918
channel c3: datafile copy complete, elapsed time: 01:20:21
channel c3: starting datafile copy
input datafile file number=00033 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.298.1201800805
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-21_0c3q6gvm tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=6 STAMP=1201886943
channel c1: datafile copy complete, elapsed time: 01:20:50
channel c1: starting datafile copy
input datafile file number=00036 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.301.1201801969
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-22_0d3q6gvm tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=7 STAMP=1201887138
channel c2: datafile copy complete, elapsed time: 01:24:05
channel c2: starting datafile copy
input datafile file number=00041 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.306.1201803399
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-32_0g3q6lkl tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=8 STAMP=1201891753
channel c4: datafile copy complete, elapsed time: 01:21:26
channel c4: starting datafile copy
input datafile file number=00044 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.309.1201804651
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-36_0i3q6ln9 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=9 STAMP=1201891755
channel c1: datafile copy complete, elapsed time: 01:20:03
channel c1: starting datafile copy
input datafile file number=00046 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.312.1201806095
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-33_0h3q6lmf tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=10 STAMP=1201891766
channel c3: datafile copy complete, elapsed time: 01:20:44
channel c3: starting datafile copy
input datafile file number=00023 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.288.1201793535
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-41_0j3q6ltd tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=11 STAMP=1201892161
channel c2: datafile copy complete, elapsed time: 01:23:37
channel c2: starting datafile copy
input datafile file number=00026 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.291.1201795153
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-23_0m3q6qdr tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=12 STAMP=1201896617
channel c3: datafile copy complete, elapsed time: 01:20:53
channel c3: starting datafile copy
input datafile file number=00029 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.294.1201796261
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-46_0l3q6qdc tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=13 STAMP=1201896650
channel c1: datafile copy complete, elapsed time: 01:21:35
channel c1: starting datafile copy
input datafile file number=00030 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.295.1201797317
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-44_0k3q6qdc tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=14 STAMP=1201896694
channel c4: datafile copy complete, elapsed time: 01:22:20
channel c4: starting datafile copy
input datafile file number=00034 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.300.1201800829
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-26_0n3q6qq7 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=15 STAMP=1201897015
channel c2: datafile copy complete, elapsed time: 01:20:53
channel c2: starting datafile copy
input datafile file number=00037 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.302.1201802025
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-30_0p3q6v6b tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=16 STAMP=1201901480
channel c1: datafile copy complete, elapsed time: 01:20:37
channel c1: starting datafile copy
input datafile file number=00039 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.304.1201803375
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-29_0o3q6v5h tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=17 STAMP=1201901527
channel c3: datafile copy complete, elapsed time: 01:21:48
channel c3: starting datafile copy
input datafile file number=00042 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.307.1201804601
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-34_0q3q6v7o tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=18 STAMP=1201901805
channel c4: datafile copy complete, elapsed time: 01:25:14
channel c4: starting datafile copy
input datafile file number=00047 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.311.1201806051
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-37_0r3q6vhu tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=19 STAMP=1201901963
channel c2: datafile copy complete, elapsed time: 01:22:23
channel c2: starting datafile copy
input datafile file number=00048 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.313.1201873549
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-39_0s3q73th tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=20 STAMP=1201906343
channel c1: datafile copy complete, elapsed time: 01:20:55
channel c1: starting datafile copy
input datafile file number=00024 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.289.1201793665
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-42_0t3q73uv tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=21 STAMP=1201906415
channel c3: datafile copy complete, elapsed time: 01:21:24
channel c3: starting datafile copy
input datafile file number=00027 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.292.1201795207
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-47_0u3q747i tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=22 STAMP=1201906737
channel c4: datafile copy complete, elapsed time: 01:22:15
channel c4: starting datafile copy
input datafile file number=00031 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.296.1201797343
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-48_0v3q74cd tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=23 STAMP=1201906865
channel c2: datafile copy complete, elapsed time: 01:21:45
channel c2: starting datafile copy
input datafile file number=00035 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.299.1201800821
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-24_103q78l8 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=24 STAMP=1201911205
channel c1: datafile copy complete, elapsed time: 01:21:03
channel c1: starting datafile copy
input datafile file number=00038 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.303.1201802375
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-27_113q78nk tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=25 STAMP=1201911367
channel c3: datafile copy complete, elapsed time: 01:22:33
channel c3: starting datafile copy
input datafile file number=00040 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.305.1201803381
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-31_123q791p tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=26 STAMP=1201911632
channel c4: datafile copy complete, elapsed time: 01:21:33
channel c4: starting datafile copy
input datafile file number=00043 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.308.1201804629
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-35_133q795m tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=27 STAMP=1201911835
channel c2: datafile copy complete, elapsed time: 01:22:57
channel c2: starting datafile copy
input datafile file number=00045 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.310.1201806031
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-38_143q7dd7 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=28 STAMP=1201916184
channel c1: datafile copy complete, elapsed time: 01:23:06
channel c1: starting datafile copy
input datafile file number=00049 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.314.1201873563
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-40_153q7did tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=29 STAMP=1201916197
channel c3: datafile copy complete, elapsed time: 01:20:24
channel c3: starting datafile copy
input datafile file number=00050 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.315.1201875477
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-43_163q7dqp tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=30 STAMP=1201916471
channel c4: datafile copy complete, elapsed time: 01:20:40
channel c4: starting datafile copy
input datafile file number=00001 name=+DATA/NTAP/DATAFILE/system.257.1201727295
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-1_1a3q7ii2 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=31 STAMP=1201916673
channel c4: datafile copy complete, elapsed time: 00:03:15
channel c4: starting datafile copy
input datafile file number=00003 name=+DATA/NTAP/DATAFILE/sysaux.258.1201727339
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-45_173q7e17 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=32 STAMP=1201916703
channel c2: datafile copy complete, elapsed time: 01:21:05
channel c2: starting datafile copy
input datafile file number=00004 name=+DATA/NTAP/DATAFILE/undotbs1.259.1201727365
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-4_1c3q7ipa tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=33 STAMP=1201916821
channel c2: datafile copy complete, elapsed time: 00:01:55
channel c2: starting datafile copy
input datafile file number=00010 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/sysaux.273.1201729255
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-3_1b3q7io5 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=34 STAMP=1201916851
channel c4: datafile copy complete, elapsed time: 00:02:58
channel c4: starting datafile copy
input datafile file number=00014 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/sysaux.278.1201729279
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-10_1d3q7isu tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=35 STAMP=1201916936
channel c2: datafile copy complete, elapsed time: 00:01:52
channel c2: starting datafile copy
input datafile file number=00018 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/sysaux.283.1201729301
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-14_1e3q7itp tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=36 STAMP=1201916940
channel c4: datafile copy complete, elapsed time: 00:01:25
channel c4: starting datafile copy
input datafile file number=00006 name=+DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/sysaux.267.1201728307
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-6_1g3q7j0e tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=37 STAMP=1201917017
channel c4: datafile copy complete, elapsed time: 00:01:25
channel c4: starting datafile copy
input datafile file number=00009 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/system.272.1201729255
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-18_1f3q7j0e tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=38 STAMP=1201917035
channel c2: datafile copy complete, elapsed time: 00:01:34
channel c2: starting datafile copy
input datafile file number=00013 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/system.277.1201729279
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-9_1h3q7j35 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=39 STAMP=1201917090
channel c4: datafile copy complete, elapsed time: 00:01:03
channel c4: starting datafile copy
input datafile file number=00017 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/system.282.1201729301
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-13_1i3q7j3d tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=40 STAMP=1201917097
channel c2: datafile copy complete, elapsed time: 00:01:00
channel c2: starting datafile copy
input datafile file number=00005 name=+DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/system.266.1201728307
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-5_1k3q7j5a tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=42 STAMP=1201917174
channel c2: datafile copy complete, elapsed time: 00:01:25
channel c2: starting datafile copy
input datafile file number=00011 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/undotbs1.271.1201729255
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-17_1j3q7j56 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=41 STAMP=1201917174
channel c4: datafile copy complete, elapsed time: 00:01:31
channel c4: starting datafile copy
input datafile file number=00008 name=+DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/undotbs1.268.1201728307
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-11_1l3q7j80 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=44 STAMP=1201917237
channel c2: datafile copy complete, elapsed time: 00:00:56
channel c2: starting datafile copy
input datafile file number=00015 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/undotbs1.276.1201729279
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-8_1m3q7j82 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=43 STAMP=1201917232
channel c4: datafile copy complete, elapsed time: 00:00:55
channel c4: starting datafile copy
input datafile file number=00019 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/undotbs1.281.1201729301
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-15_1n3q7j9p tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=45 STAMP=1201917288
channel c2: datafile copy complete, elapsed time: 00:00:55
channel c2: starting datafile copy
input datafile file number=00007 name=+DATA/NTAP/DATAFILE/users.260.1201727365
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-19_1o3q7j9p tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=46 STAMP=1201917295
channel c4: datafile copy complete, elapsed time: 00:00:55
channel c4: starting datafile copy
input datafile file number=00012 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/users.275.1201729277
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-7_1p3q7jbg tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=47 STAMP=1201917297
channel c2: datafile copy complete, elapsed time: 00:00:02
channel c2: starting datafile copy
input datafile file number=00016 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/users.280.1201729301
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-12_1q3q7jbh tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=48 STAMP=1201917297
channel c4: datafile copy complete, elapsed time: 00:00:01
channel c4: starting datafile copy
input datafile file number=00020 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/users.285.1201729323
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-16_1r3q7jbi tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=49 STAMP=1201917298
channel c2: datafile copy complete, elapsed time: 00:00:01
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-20_1s3q7jbi tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=50 STAMP=1201917298
channel c4: datafile copy complete, elapsed time: 00:00:01
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-50_193q7i95 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=51 STAMP=1201919158
channel c3: datafile copy complete, elapsed time: 00:49:26
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-49_183q7i95 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=52 STAMP=1201919167
channel c1: datafile copy complete, elapsed time: 00:49:36
Finished backup at 24-MAY-25

Starting Control File and SPFILE Autobackup at 24-MAY-25
piece handle=/nfsgcnv/archlog/NTAP/autobackup/2025_05_24/o1_mf_s_1201919173_n32cl775_.bkp comment=NONE
Finished Control File and SPFILE Autobackup at 24-MAY-25
released channel: c1
released channel: c2
released channel: c3
released channel: c4

RMAN> **end-of-file**

RMAN>


....
. Répertorier la copie d'image de base de données après la sauvegarde pour observer qu'une copie d'image de base de données a été créée dans un point de montage NFS GCNV.
+
....
RMAN> list copy of database tag 'OraCopyBKUPonGCNV_level_0';

List of Datafile Copies
=======================

Key     File S Completion Time Ckp SCN    Ckp Time        Sparse
------- ---- - --------------- ---------- --------------- ------
31      1    A 24-MAY-25       2812886    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-1_1a3q7ii2
        Tag: ORACOPYBKUPONGCNV_LEVEL_0

34      3    A 24-MAY-25       2813001    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-3_1b3q7io5
        Tag: ORACOPYBKUPONGCNV_LEVEL_0

33      4    A 24-MAY-25       2813043    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-4_1c3q7ipa
        Tag: ORACOPYBKUPONGCNV_LEVEL_0

42      5    A 24-MAY-25       2377077    21-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-5_1k3q7j5a
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 2, PDB Name: PDB$SEED

37      6    A 24-MAY-25       2377077    21-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-6_1g3q7j0e
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 2, PDB Name: PDB$SEED

47      7    A 24-MAY-25       2813504    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-7_1p3q7jbg
        Tag: ORACOPYBKUPONGCNV_LEVEL_0

43      8    A 24-MAY-25       2377077    21-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-8_1m3q7j82
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 2, PDB Name: PDB$SEED

39      9    A 24-MAY-25       2813238    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-9_1h3q7j35
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

35      10   A 24-MAY-25       2813112    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-10_1d3q7isu
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

44      11   A 24-MAY-25       2813425    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-11_1l3q7j80
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

48      12   A 24-MAY-25       2813508    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-12_1q3q7jbh
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

40      13   A 24-MAY-25       2813243    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-13_1i3q7j3d
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

36      14   A 24-MAY-25       2813124    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-14_1e3q7itp
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

45      15   A 24-MAY-25       2813463    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-15_1n3q7j9p
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

49      16   A 24-MAY-25       2813512    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-16_1r3q7jbi
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

41      17   A 24-MAY-25       2813364    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-17_1j3q7j56
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

38      18   A 24-MAY-25       2813185    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-18_1f3q7j0e
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

46      19   A 24-MAY-25       2813467    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-19_1o3q7j9p
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

50      20   A 24-MAY-25       2813516    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-20_1s3q7jbi
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

6       21   A 23-MAY-25       2768847    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-21_0c3q6gvm
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

7       22   A 23-MAY-25       2768851    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-22_0d3q6gvm
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

12      23   A 23-MAY-25       2777335    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-23_0m3q6qdr
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

24      24   A 24-MAY-25       2803186    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-24_103q78l8
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

5       25   A 23-MAY-25       2768856    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-25_0e3q6gvn
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

15      26   A 23-MAY-25       2777644    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-26_0n3q6qq7
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

25      27   A 24-MAY-25       2803231    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-27_113q78nk
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

4       28   A 23-MAY-25       2768859    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-28_0f3q6gvn
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

17      29   A 23-MAY-25       2781833    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-29_0o3q6v5h
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

16      30   A 23-MAY-25       2781842    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-30_0p3q6v6b
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

26      31   A 24-MAY-25       2803450    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-31_123q791p
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

8       32   A 23-MAY-25       2773143    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-32_0g3q6lkl
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

10      33   A 23-MAY-25       2773183    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-33_0h3q6lmf
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

18      34   A 23-MAY-25       2781890    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-34_0q3q6v7o
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

27      35   A 24-MAY-25       2803827    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-35_133q795m
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

9       36   A 23-MAY-25       2773193    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-36_0i3q6ln9
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

19      37   A 23-MAY-25       2782104    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-37_0r3q6vhu
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

28      38   A 24-MAY-25       2808047    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-38_143q7dd7
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

20      39   A 23-MAY-25       2786009    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-39_0s3q73th
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

29      40   A 24-MAY-25       2808169    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-40_153q7did
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

11      41   A 23-MAY-25       2773323    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-41_0j3q6ltd
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

21      42   A 23-MAY-25       2786042    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-42_0t3q73uv
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

30      43   A 24-MAY-25       2808367    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-43_163q7dqp
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

14      44   A 23-MAY-25       2777322    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-44_0k3q6qdc
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

32      45   A 24-MAY-25       2808624    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-45_173q7e17
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

13      46   A 23-MAY-25       2777326    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-46_0l3q6qdc
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

22      47   A 23-MAY-25       2786345    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-47_0u3q747i
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

23      48   A 23-MAY-25       2786456    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-48_0v3q74cd
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

52      49   A 24-MAY-25       2812634    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-49_183q7i95
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

51      50   A 24-MAY-25       2812638    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-50_193q7i95
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3


RMAN>

....
. Signalez le schéma à partir de l'invite de commande Oracle RMAN pour observer que les fichiers de données VLDB actuels se trouvent sur le stockage primaire.
+
....

RMAN> report schema;

Report of database schema for database with db_unique_name NTAP

List of Permanent Datafiles
===========================
File Size(MB) Tablespace           RB segs Datafile Name
---- -------- -------------------- ------- ------------------------
1    1070     SYSTEM               YES     +DATA/NTAP/DATAFILE/system.257.1201727295
3    970      SYSAUX               NO      +DATA/NTAP/DATAFILE/sysaux.258.1201727339
4    680      UNDOTBS1             YES     +DATA/NTAP/DATAFILE/undotbs1.259.1201727365
5    400      PDB$SEED:SYSTEM      NO      +DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/system.266.1201728307
6    460      PDB$SEED:SYSAUX      NO      +DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/sysaux.267.1201728307
7    5        USERS                NO      +DATA/NTAP/DATAFILE/users.260.1201727365
8    235      PDB$SEED:UNDOTBS1    NO      +DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/undotbs1.268.1201728307
9    410      NTAP_PDB1:SYSTEM     YES     +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/system.272.1201729255
10   510      NTAP_PDB1:SYSAUX     NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/sysaux.273.1201729255
11   240      NTAP_PDB1:UNDOTBS1   YES     +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/undotbs1.271.1201729255
12   5        NTAP_PDB1:USERS      NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/users.275.1201729277
13   410      NTAP_PDB2:SYSTEM     YES     +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/system.277.1201729279
14   510      NTAP_PDB2:SYSAUX     NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/sysaux.278.1201729279
15   235      NTAP_PDB2:UNDOTBS1   YES     +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/undotbs1.276.1201729279
16   5        NTAP_PDB2:USERS      NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/users.280.1201729301
17   410      NTAP_PDB3:SYSTEM     YES     +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/system.282.1201729301
18   510      NTAP_PDB3:SYSAUX     NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/sysaux.283.1201729301
19   235      NTAP_PDB3:UNDOTBS1   YES     +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/undotbs1.281.1201729301
20   5        NTAP_PDB3:USERS      NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/users.285.1201729323
21   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.286.1201793019
22   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.287.1201793419
23   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.288.1201793535
24   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.289.1201793665
25   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.290.1201794401
26   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.291.1201795153
27   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.292.1201795207
28   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.293.1201795271
29   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.294.1201796261
30   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.295.1201797317
31   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.296.1201797343
32   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.297.1201797351
33   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.298.1201800805
34   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.300.1201800829
35   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.299.1201800821
36   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.301.1201801969
37   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.302.1201802025
38   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.303.1201802375
39   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.304.1201803375
40   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.305.1201803381
41   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.306.1201803399
42   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.307.1201804601
43   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.308.1201804629
44   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.309.1201804651
45   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.310.1201806031
46   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.312.1201806095
47   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.311.1201806051
48   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.313.1201873549
49   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.314.1201873563
50   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.315.1201875477

List of Temporary Files
=======================
File Size(MB) Tablespace           Maxsize(MB) Tempfile Name
---- -------- -------------------- ----------- --------------------
1    123      TEMP                 32767       +DATA/NTAP/TEMPFILE/temp.265.1201727469
2    123      PDB$SEED:TEMP        32767       +DATA/NTAP/35AD01790801A78FE063060B460ABC41/TEMPFILE/temp.269.1201728335
3    16384    NTAP_PDB1:TEMP       32767       +DATA/NTAP/35AD38314E81AF11E063060B460AE362/TEMPFILE/temp.274.1201729271
4    30720    NTAP_PDB2:TEMP       32767       +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/TEMPFILE/temp.279.1201729295
5    30720    NTAP_PDB3:TEMP       32767       +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/TEMPFILE/temp.284.1201729319

RMAN>



....
. Validez la copie de l'image de la base de données à partir du point de montage OS NFS.
+
....
[oracle@orap ~]$ ls -l /nfsgcnv/oracopy/
total 954924748
-rw-r----- 1 oracle asm    11600384 May 27 16:25 bct_ntap.ctf
-rw-r----- 1 oracle asm 32212262912 May 23 17:29 data_D-NTAP_I-1379265854_TS-SOE1_FNO-21_0c3q6gvm
-rw-r----- 1 oracle asm 32212262912 May 23 17:32 data_D-NTAP_I-1379265854_TS-SOE1_FNO-22_0d3q6gvm
-rw-r----- 1 oracle asm 32212262912 May 23 17:28 data_D-NTAP_I-1379265854_TS-SOE1_FNO-25_0e3q6gvn
-rw-r----- 1 oracle asm 32212262912 May 23 17:27 data_D-NTAP_I-1379265854_TS-SOE1_FNO-28_0f3q6gvn
-rw-r----- 1 oracle asm 32212262912 May 23 18:49 data_D-NTAP_I-1379265854_TS-SOE1_FNO-32_0g3q6lkl
-rw-r----- 1 oracle asm 32212262912 May 23 18:49 data_D-NTAP_I-1379265854_TS-SOE1_FNO-33_0h3q6lmf
-rw-r----- 1 oracle asm 32212262912 May 23 18:49 data_D-NTAP_I-1379265854_TS-SOE1_FNO-36_0i3q6ln9
-rw-r----- 1 oracle asm 32212262912 May 23 18:56 data_D-NTAP_I-1379265854_TS-SOE1_FNO-41_0j3q6ltd
-rw-r----- 1 oracle asm 32212262912 May 23 20:11 data_D-NTAP_I-1379265854_TS-SOE1_FNO-44_0k3q6qdc
-rw-r----- 1 oracle asm 32212262912 May 23 20:10 data_D-NTAP_I-1379265854_TS-SOE1_FNO-46_0l3q6qdc
-rw-r----- 1 oracle asm 32212262912 May 23 20:10 data_D-NTAP_I-1379265854_TS-SOE2_FNO-23_0m3q6qdr
-rw-r----- 1 oracle asm 32212262912 May 23 20:16 data_D-NTAP_I-1379265854_TS-SOE2_FNO-26_0n3q6qq7
-rw-r----- 1 oracle asm 32212262912 May 23 21:32 data_D-NTAP_I-1379265854_TS-SOE2_FNO-29_0o3q6v5h
-rw-r----- 1 oracle asm 32212262912 May 23 21:31 data_D-NTAP_I-1379265854_TS-SOE2_FNO-30_0p3q6v6b
-rw-r----- 1 oracle asm 32212262912 May 23 21:36 data_D-NTAP_I-1379265854_TS-SOE2_FNO-34_0q3q6v7o
-rw-r----- 1 oracle asm 32212262912 May 23 21:39 data_D-NTAP_I-1379265854_TS-SOE2_FNO-37_0r3q6vhu
-rw-r----- 1 oracle asm 32212262912 May 23 22:52 data_D-NTAP_I-1379265854_TS-SOE2_FNO-39_0s3q73th
-rw-r----- 1 oracle asm 32212262912 May 23 22:53 data_D-NTAP_I-1379265854_TS-SOE2_FNO-42_0t3q73uv
-rw-r----- 1 oracle asm 32212262912 May 23 22:58 data_D-NTAP_I-1379265854_TS-SOE2_FNO-47_0u3q747i
-rw-r----- 1 oracle asm 32212262912 May 23 23:01 data_D-NTAP_I-1379265854_TS-SOE2_FNO-48_0v3q74cd
-rw-r----- 1 oracle asm 32212262912 May 24 00:13 data_D-NTAP_I-1379265854_TS-SOE3_FNO-24_103q78l8
-rw-r----- 1 oracle asm 32212262912 May 24 00:16 data_D-NTAP_I-1379265854_TS-SOE3_FNO-27_113q78nk
-rw-r----- 1 oracle asm 32212262912 May 24 00:20 data_D-NTAP_I-1379265854_TS-SOE3_FNO-31_123q791p
-rw-r----- 1 oracle asm 32212262912 May 24 00:23 data_D-NTAP_I-1379265854_TS-SOE3_FNO-35_133q795m
-rw-r----- 1 oracle asm 32212262912 May 24 01:36 data_D-NTAP_I-1379265854_TS-SOE3_FNO-38_143q7dd7
-rw-r----- 1 oracle asm 32212262912 May 24 01:36 data_D-NTAP_I-1379265854_TS-SOE3_FNO-40_153q7did
-rw-r----- 1 oracle asm 32212262912 May 24 01:41 data_D-NTAP_I-1379265854_TS-SOE3_FNO-43_163q7dqp
-rw-r----- 1 oracle asm 32212262912 May 24 01:45 data_D-NTAP_I-1379265854_TS-SOE3_FNO-45_173q7e17
-rw-r----- 1 oracle asm 32212262912 May 24 02:26 data_D-NTAP_I-1379265854_TS-SOE3_FNO-49_183q7i95
-rw-r----- 1 oracle asm 32212262912 May 24 02:25 data_D-NTAP_I-1379265854_TS-SOE3_FNO-50_193q7i95
-rw-r----- 1 oracle asm   534781952 May 24 01:48 data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-10_1d3q7isu
-rw-r----- 1 oracle asm   534781952 May 24 01:49 data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-14_1e3q7itp
-rw-r----- 1 oracle asm   534781952 May 24 01:50 data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-18_1f3q7j0e
-rw-r----- 1 oracle asm   985669632 May 24 01:47 data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-3_1b3q7io5
-rw-r----- 1 oracle asm   482353152 May 24 01:50 data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-6_1g3q7j0e
-rw-r----- 1 oracle asm  1121984512 May 24 01:44 data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-1_1a3q7ii2
-rw-r----- 1 oracle asm   429924352 May 24 01:51 data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-13_1i3q7j3d
-rw-r----- 1 oracle asm   429924352 May 24 01:52 data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-17_1j3q7j56
-rw-r----- 1 oracle asm   419438592 May 24 01:52 data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-5_1k3q7j5a
-rw-r----- 1 oracle asm   429924352 May 24 01:51 data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-9_1h3q7j35
-rw-r----- 1 oracle asm   251666432 May 24 01:53 data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-11_1l3q7j80
-rw-r----- 1 oracle asm   246423552 May 24 01:54 data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-15_1n3q7j9p
-rw-r----- 1 oracle asm   246423552 May 24 01:54 data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-19_1o3q7j9p
-rw-r----- 1 oracle asm   713039872 May 24 01:47 data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-4_1c3q7ipa
-rw-r----- 1 oracle asm   246423552 May 24 01:53 data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-8_1m3q7j82
-rw-r----- 1 oracle asm     5251072 May 24 01:54 data_D-NTAP_I-1379265854_TS-USERS_FNO-12_1q3q7jbh
-rw-r----- 1 oracle asm     5251072 May 24 01:54 data_D-NTAP_I-1379265854_TS-USERS_FNO-16_1r3q7jbi
-rw-r----- 1 oracle asm     5251072 May 24 01:54 data_D-NTAP_I-1379265854_TS-USERS_FNO-20_1s3q7jbi
-rw-r----- 1 oracle asm     5251072 May 24 01:54 data_D-NTAP_I-1379265854_TS-USERS_FNO-7_1p3q7jbg

....
. Exécutez le script de sauvegarde RMAN à partir d'un simple script shell UNIX à partir de crontab à l'intervalle souhaité.
+
....

[oracle@orap ~]$ cat rman_bkup_merge.sh
#/usr/bin/sh

log=/home/oracle/logs/ora_bkup_merge_`date +"%Y-%m%d-%H%M%S"`.log

echo "Begin Oracle DB incremental backup/merge to copy at `date +"%Y-%m%d-%H%M%S"`" >> $log

export ORACLE_HOME=/u01/app/oracle/product/19.0.0/NTAP
export ORACLE_SID=NTAP
export PATH=$ORACLE_HOME/bin:$PATH

rman target / nocatalog <<EOF>> $log
@/home/oracle/rman_bkup_merge.cmd
EOF

echo "End Oracle DB incremental backup/merge to copy at `date +"%Y-%m%d-%H%M%S"`" >> $log

....


Ceci termine la configuration d'une sauvegarde de copie d'image de secours Oracle VLDB et la fusion sur un montage NFS sur serveur à partir du stockage GCNV.

====


=== Récupération rapide d'Oracle VLDB à l'aide d'une copie d'image de sauvegarde



==== Récupération complète en cas de perte ou de corruption des fichiers de données Oracle

[%collapsible%open]
====
En cas de panne due à un problème de stockage principal tel qu'une perte ou une corruption de données, la base de données peut être rapidement basculée vers une copie d'image sur le montage NFS GCNV et récupérée à l'état actuel sans restauration de la base de données. L'élimination de la restauration des supports accélère considérablement la restauration des bases de données pour un VLDB. Ce cas d'utilisation suppose que le serveur BDD Oracle VLDB est intact et que le fichier de contrôle de base de données, les journaux archivés et actuels sont tous disponibles pour la restauration.

. Connectez-vous à l'hôte du serveur VLDB principal en tant qu'utilisateur Oracle et créez une table de test avant le basculement.
+
....

[oracle@orap ~]$ sqlplus / as sysdba

SQL*Plus: Release 19.0.0.0.0 - Production on Tue May 27 17:31:23 2025
Version 19.18.0.0.0

Copyright (c) 1982, 2022, Oracle.  All rights reserved.


Connected to:
Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.18.0.0.0

SQL> alter session set container=ntap_pdb1;

Session altered.

SQL> create table test(id integer, dt timestamp, event varchar(100));

Table created.

....
. Insérer une ligne dans la table de test. Cette ligne est insérée après la dernière sauvegarde incrémentielle et fusion, et ses données ne figurent pas dans le jeu de sauvegarde. La démonstration suivante montre que la ligne de test est restaurée après la restauration complète de la base de données.
+
....

SQL> insert into test values (1, sysdate, 'validate a full recovery after a switch to DB backup copy on GCNV');

1 row created.

SQL> commit;

Commit complete.


....
. Simulez une panne en arrêtant la base de données.
+
....

SQL> alter session set container=cdb$root;

Session altered.

SQL> shutdown immediate;
Database closed.
Database dismounted.
ORACLE instance shut down.

....
. En tant qu'utilisateur Oracle, connectez-vous à la base de données Oracle via RMAN pour basculer la base de données à copier.
+
....

[oracle@orap ~]$ rman target / nocatalog;

Recovery Manager: Release 19.0.0.0.0 - Production on Tue May 27 17:40:59 2025
Version 19.18.0.0.0

Copyright (c) 1982, 2019, Oracle and/or its affiliates.  All rights reserved.

connected to target database (not started)

RMAN> startup mount;

Oracle instance started
database mounted

Total System Global Area    5620363744 bytes

Fixed Size                     9175520 bytes
Variable Size               1023410176 bytes
Database Buffers            4580179968 bytes
Redo Buffers                   7598080 bytes

RMAN> switch database to copy;

datafile 1 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-1_1a3q7ii2"
datafile 3 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-3_1b3q7io5"
datafile 4 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-4_1c3q7ipa"
datafile 5 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-5_1k3q7j5a"
datafile 6 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-6_1g3q7j0e"
datafile 7 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-7_1p3q7jbg"
datafile 8 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-8_1m3q7j82"
datafile 9 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-9_1h3q7j35"
datafile 10 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-10_1d3q7isu"
datafile 11 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-11_1l3q7j80"
datafile 12 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-12_1q3q7jbh"
datafile 13 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-13_1i3q7j3d"
datafile 14 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-14_1e3q7itp"
datafile 15 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-15_1n3q7j9p"
datafile 16 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-16_1r3q7jbi"
datafile 17 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-17_1j3q7j56"
datafile 18 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-18_1f3q7j0e"
datafile 19 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-19_1o3q7j9p"
datafile 20 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-20_1s3q7jbi"
datafile 21 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-21_0c3q6gvm"
datafile 22 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-22_0d3q6gvm"
datafile 23 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-23_0m3q6qdr"
datafile 24 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-24_103q78l8"
datafile 25 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-25_0e3q6gvn"
datafile 26 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-26_0n3q6qq7"
datafile 27 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-27_113q78nk"
datafile 28 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-28_0f3q6gvn"
datafile 29 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-29_0o3q6v5h"
datafile 30 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-30_0p3q6v6b"
datafile 31 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-31_123q791p"
datafile 32 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-32_0g3q6lkl"
datafile 33 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-33_0h3q6lmf"
datafile 34 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-34_0q3q6v7o"
datafile 35 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-35_133q795m"
datafile 36 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-36_0i3q6ln9"
datafile 37 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-37_0r3q6vhu"
datafile 38 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-38_143q7dd7"
datafile 39 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-39_0s3q73th"
datafile 40 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-40_153q7did"
datafile 41 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-41_0j3q6ltd"
datafile 42 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-42_0t3q73uv"
datafile 43 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-43_163q7dqp"
datafile 44 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-44_0k3q6qdc"
datafile 45 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-45_173q7e17"
datafile 46 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-46_0l3q6qdc"
datafile 47 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-47_0u3q747i"
datafile 48 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-48_0v3q74cd"
datafile 49 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-49_183q7i95"
datafile 50 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-50_193q7i95"


....
. Restaurez et ouvrez la base de données pour la mettre à jour à partir de la dernière sauvegarde incrémentielle.
+
....
RMAN> recover database;

Starting recover at 27-MAY-25
allocated channel: ORA_DISK_1
channel ORA_DISK_1: SID=139 device type=DISK
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00012: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-12_1q3q7jbh
destination for restore of datafile 00028: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-28_0f3q6gvn
destination for restore of datafile 00041: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-41_0j3q6ltd
destination for restore of datafile 00044: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-44_0k3q6qdc
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/213qh3m5_65_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/213qh3m5_65_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00011: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-11_1l3q7j80
destination for restore of datafile 00025: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-25_0e3q6gvn
destination for restore of datafile 00036: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-36_0i3q6ln9
destination for restore of datafile 00046: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-46_0l3q6qdc
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/1u3qh3m5_62_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/1u3qh3m5_62_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00015: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-15_1n3q7j9p
destination for restore of datafile 00029: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-29_0o3q6v5h
destination for restore of datafile 00039: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-39_0s3q73th
destination for restore of datafile 00048: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-48_0v3q74cd
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/1v3qh3m5_63_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/1v3qh3m5_63_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00019: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-19_1o3q7j9p
destination for restore of datafile 00031: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-31_123q791p
destination for restore of datafile 00043: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-43_163q7dqp
destination for restore of datafile 00050: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-50_193q7i95
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/203qh3m5_64_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/203qh3m5_64_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00010: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-10_1d3q7isu
destination for restore of datafile 00021: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-21_0c3q6gvm
destination for restore of datafile 00032: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-32_0g3q6lkl
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/243qh3m7_68_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/243qh3m7_68_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00016: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-16_1r3q7jbi
destination for restore of datafile 00030: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-30_0p3q6v6b
destination for restore of datafile 00042: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-42_0t3q73uv
destination for restore of datafile 00047: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-47_0u3q747i
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/223qh3m6_66_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/223qh3m6_66_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00020: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-20_1s3q7jbi
destination for restore of datafile 00035: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-35_133q795m
destination for restore of datafile 00045: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-45_173q7e17
destination for restore of datafile 00049: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-49_183q7i95
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/233qh3m7_67_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/233qh3m7_67_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00009: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-9_1h3q7j35
destination for restore of datafile 00022: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-22_0d3q6gvm
destination for restore of datafile 00033: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-33_0h3q6lmf
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/273qh3m7_71_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/273qh3m7_71_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00013: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-13_1i3q7j3d
destination for restore of datafile 00026: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-26_0n3q6qq7
destination for restore of datafile 00037: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-37_0r3q6vhu
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/283qh3m7_72_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/283qh3m7_72_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00014: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-14_1e3q7itp
destination for restore of datafile 00023: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-23_0m3q6qdr
destination for restore of datafile 00034: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-34_0q3q6v7o
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/253qh3m7_69_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/253qh3m7_69_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00018: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-18_1f3q7j0e
destination for restore of datafile 00024: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-24_103q78l8
destination for restore of datafile 00038: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-38_143q7dd7
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/263qh3m7_70_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/263qh3m7_70_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:02
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00001: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-1_1a3q7ii2
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/2a3qh3m9_74_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/2a3qh3m9_74_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00017: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-17_1j3q7j56
destination for restore of datafile 00027: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-27_113q78nk
destination for restore of datafile 00040: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-40_153q7did
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/293qh3m9_73_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/293qh3m9_73_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00007: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-7_1p3q7jbg
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/2g3qh3ma_80_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/2g3qh3ma_80_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00004: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-4_1c3q7ipa
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/2c3qh3m9_76_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/2c3qh3m9_76_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:03
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00003: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-3_1b3q7io5
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/2b3qh3m9_75_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/2b3qh3m9_75_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:07

starting media recovery
media recovery complete, elapsed time: 00:00:04

Finished recover at 27-MAY-25

RMAN> alter database open;

Statement processed

RMAN>


....
. Vérifiez la structure de la base de données de sqlplus après la restauration pour observer que tous les fichiers de données VLDB, à l'exception des fichiers de contrôle, temporaires et journaux en cours, sont désormais basculés pour les copier sur le système de fichiers NFS GCNV.
+
....

[oracle@orap ~]$ sqlplus / as sysdba;

SQL*Plus: Release 19.0.0.0.0 - Production on Tue May 27 17:45:04 2025
Version 19.18.0.0.0

Copyright (c) 1982, 2022, Oracle.  All rights reserved.


Connected to:
Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.18.0.0.0

SQL> show pdbs;

    CON_ID CON_NAME                       OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
         2 PDB$SEED                       READ ONLY  NO
         3 NTAP_PDB1                      READ WRITE NO
         4 NTAP_PDB2                      READ WRITE NO
         5 NTAP_PDB3                      READ WRITE NO
SQL> select name from v$datafile
  2  union
  3  select name from v$tempfile
  4  union
  5  select name from v$controlfile
  6  union
  7  select member from v$logfile;

NAME
--------------------------------------------------------------------------------
+DATA/NTAP/35AD01790801A78FE063060B460ABC41/TEMPFILE/temp.269.1201728335
+DATA/NTAP/35AD38314E81AF11E063060B460AE362/TEMPFILE/temp.274.1201729271
+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/TEMPFILE/temp.279.1201729295
+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/TEMPFILE/temp.284.1201729319
+DATA/NTAP/CONTROLFILE/current.261.1201727423
+DATA/NTAP/ONLINELOG/group_1.262.1201727425
+DATA/NTAP/ONLINELOG/group_2.263.1201727425
+DATA/NTAP/ONLINELOG/group_3.264.1201727425
+DATA/NTAP/TEMPFILE/temp.265.1201727469
+LOGS/NTAP/CONTROLFILE/current.256.1201727423
+LOGS/NTAP/ONLINELOG/group_1.258.1201727433

NAME
--------------------------------------------------------------------------------
+LOGS/NTAP/ONLINELOG/group_2.257.1201727431
+LOGS/NTAP/ONLINELOG/group_3.259.1201727433
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-21_0c3q6gvm
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-22_0d3q6gvm
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-25_0e3q6gvn
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-28_0f3q6gvn
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-32_0g3q6lkl
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-33_0h3q6lmf
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-36_0i3q6ln9
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-41_0j3q6ltd
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-44_0k3q6qdc

NAME
--------------------------------------------------------------------------------
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-46_0l3q6qdc
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-23_0m3q6qdr
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-26_0n3q6qq7
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-29_0o3q6v5h
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-30_0p3q6v6b
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-34_0q3q6v7o
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-37_0r3q6vhu
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-39_0s3q73th
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-42_0t3q73uv
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-47_0u3q747i
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-48_0v3q74cd

NAME
--------------------------------------------------------------------------------
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-24_103q78l8
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-27_113q78nk
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-31_123q791p
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-35_133q795m
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-38_143q7dd7
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-40_153q7did
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-43_163q7dqp
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-45_173q7e17
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-49_183q7i95
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-50_193q7i95
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-10_1d3q7isu

NAME
--------------------------------------------------------------------------------
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-14_1e3q7itp
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-18_1f3q7j0e
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-3_1b3q7io5
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-6_1g3q7j0e
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-13_1i3q7j3d
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-17_1j3q7j56
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-1_1a3q7ii2
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-5_1k3q7j5a
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-9_1h3q7j35
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-11_1l3q7j80
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-15_1n3q7j9p

NAME
--------------------------------------------------------------------------------
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-19_1o3q7j9p
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-4_1c3q7ipa
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-8_1m3q7j82
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-12_1q3q7jbh
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-16_1r3q7jbi
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-20_1s3q7jbi
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-7_1p3q7jbg

62 rows selected.


....
. À partir de SQL plus, validez que la ligne de test que nous avons inertée après la dernière sauvegarde incrémentielle et avant de passer à la copie de sauvegarde d'image a été récupérée.
+
....

SQL> alter session set container=ntap_pdb1;

Session altered.

SQL> select * from test;

        ID
----------
DT
---------------------------------------------------------------------------
EVENT
--------------------------------------------------------------------------------
         1
27-MAY-25 05.35.44.000000 PM
validate a full recovery after a switch to DB backup copy on GCNV


SQL>

....


====


==== Inverser l'Oracle VLDB vers le stockage principal à partir de la copie de sauvegarde

[%collapsible%open]
====
Une fois la panne de stockage corrigée sur le stockage principal, la base de données peut être facilement restaurée sur le stockage principal avec un temps d'arrêt minimal. Voici la procédure étape par étape.

. À partir de RMAN, vérifiez que le schéma de base de données se trouve actuellement sur le stockage de sauvegarde GCNV.
+
....

RMAN> report schema;

Report of database schema for database with db_unique_name NTAP

List of Permanent Datafiles
===========================
File Size(MB) Tablespace           RB segs Datafile Name
---- -------- -------------------- ------- ------------------------
1    1070     SYSTEM               YES     /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-1_1a3q7ii2
3    970      SYSAUX               NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-3_1b3q7io5
4    680      UNDOTBS1             YES     /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-4_1c3q7ipa
5    400      PDB$SEED:SYSTEM      NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-5_1k3q7j5a
6    460      PDB$SEED:SYSAUX      NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-6_1g3q7j0e
7    5        USERS                NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-7_1p3q7jbg
8    235      PDB$SEED:UNDOTBS1    NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-8_1m3q7j82
9    410      NTAP_PDB1:SYSTEM     YES     /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-9_1h3q7j35
10   510      NTAP_PDB1:SYSAUX     NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-10_1d3q7isu
11   240      NTAP_PDB1:UNDOTBS1   YES     /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-11_1l3q7j80
12   5        NTAP_PDB1:USERS      NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-12_1q3q7jbh
13   410      NTAP_PDB2:SYSTEM     YES     /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-13_1i3q7j3d
14   510      NTAP_PDB2:SYSAUX     NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-14_1e3q7itp
15   235      NTAP_PDB2:UNDOTBS1   YES     /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-15_1n3q7j9p
16   5        NTAP_PDB2:USERS      NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-16_1r3q7jbi
17   410      NTAP_PDB3:SYSTEM     YES     /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-17_1j3q7j56
18   510      NTAP_PDB3:SYSAUX     NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-18_1f3q7j0e
19   235      NTAP_PDB3:UNDOTBS1   YES     /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-19_1o3q7j9p
20   5        NTAP_PDB3:USERS      NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-20_1s3q7jbi
21   30720    NTAP_PDB1:SOE1       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-21_0c3q6gvm
22   30720    NTAP_PDB1:SOE1       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-22_0d3q6gvm
23   30720    NTAP_PDB2:SOE2       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-23_0m3q6qdr
24   30720    NTAP_PDB3:SOE3       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-24_103q78l8
25   30720    NTAP_PDB1:SOE1       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-25_0e3q6gvn
26   30720    NTAP_PDB2:SOE2       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-26_0n3q6qq7
27   30720    NTAP_PDB3:SOE3       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-27_113q78nk
28   30720    NTAP_PDB1:SOE1       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-28_0f3q6gvn
29   30720    NTAP_PDB2:SOE2       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-29_0o3q6v5h
30   30720    NTAP_PDB2:SOE2       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-30_0p3q6v6b
31   30720    NTAP_PDB3:SOE3       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-31_123q791p
32   30720    NTAP_PDB1:SOE1       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-32_0g3q6lkl
33   30720    NTAP_PDB1:SOE1       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-33_0h3q6lmf
34   30720    NTAP_PDB2:SOE2       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-34_0q3q6v7o
35   30720    NTAP_PDB3:SOE3       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-35_133q795m
36   30720    NTAP_PDB1:SOE1       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-36_0i3q6ln9
37   30720    NTAP_PDB2:SOE2       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-37_0r3q6vhu
38   30720    NTAP_PDB3:SOE3       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-38_143q7dd7
39   30720    NTAP_PDB2:SOE2       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-39_0s3q73th
40   30720    NTAP_PDB3:SOE3       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-40_153q7did
41   30720    NTAP_PDB1:SOE1       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-41_0j3q6ltd
42   30720    NTAP_PDB2:SOE2       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-42_0t3q73uv
43   30720    NTAP_PDB3:SOE3       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-43_163q7dqp
44   30720    NTAP_PDB1:SOE1       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-44_0k3q6qdc
45   30720    NTAP_PDB3:SOE3       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-45_173q7e17
46   30720    NTAP_PDB1:SOE1       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-46_0l3q6qdc
47   30720    NTAP_PDB2:SOE2       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-47_0u3q747i
48   30720    NTAP_PDB2:SOE2       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-48_0v3q74cd
49   30720    NTAP_PDB3:SOE3       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-49_183q7i95
50   30720    NTAP_PDB3:SOE3       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-50_193q7i95

List of Temporary Files
=======================
File Size(MB) Tablespace           Maxsize(MB) Tempfile Name
---- -------- -------------------- ----------- --------------------
1    123      TEMP                 32767       +DATA/NTAP/TEMPFILE/temp.265.1201727469
2    123      PDB$SEED:TEMP        32767       +DATA/NTAP/35AD01790801A78FE063060B460ABC41/TEMPFILE/temp.269.1201728335
3    16384    NTAP_PDB1:TEMP       32767       +DATA/NTAP/35AD38314E81AF11E063060B460AE362/TEMPFILE/temp.274.1201729271
4    30720    NTAP_PDB2:TEMP       32767       +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/TEMPFILE/temp.279.1201729295
5    30720    NTAP_PDB3:TEMP       32767       +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/TEMPFILE/temp.284.1201729319

....
. Une fois la base de données principale basculée vers la copie d'image, la base de données principale est désormais une copie dans l'enregistrement RMAN.
+
....

RMAN> list copy of database;

List of Datafile Copies
=======================

Key     File S Completion Time Ckp SCN    Ckp Time        Sparse
------- ---- - --------------- ---------- --------------- ------
53      1    A 27-MAY-25       2901679    27-MAY-25       NO
        Name: +DATA/NTAP/DATAFILE/system.257.1201727295

54      3    A 27-MAY-25       2901679    27-MAY-25       NO
        Name: +DATA/NTAP/DATAFILE/sysaux.258.1201727339

55      4    A 27-MAY-25       2901679    27-MAY-25       NO
        Name: +DATA/NTAP/DATAFILE/undotbs1.259.1201727365

56      5    A 27-MAY-25       2377077    21-MAY-25       NO
        Name: +DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/system.266.1201728307
        Container ID: 2, PDB Name: PDB$SEED

57      6    A 27-MAY-25       2377077    21-MAY-25       NO
        Name: +DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/sysaux.267.1201728307
        Container ID: 2, PDB Name: PDB$SEED

58      7    A 27-MAY-25       2901679    27-MAY-25       NO
        Name: +DATA/NTAP/DATAFILE/users.260.1201727365

59      8    A 27-MAY-25       2377077    21-MAY-25       NO
        Name: +DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/undotbs1.268.1201728307
        Container ID: 2, PDB Name: PDB$SEED

60      9    A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/system.272.1201729255
        Container ID: 3, PDB Name: NTAP_PDB1

61      10   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/sysaux.273.1201729255
        Container ID: 3, PDB Name: NTAP_PDB1

62      11   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/undotbs1.271.1201729255
        Container ID: 3, PDB Name: NTAP_PDB1

63      12   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/users.275.1201729277
        Container ID: 3, PDB Name: NTAP_PDB1

64      13   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/system.277.1201729279
        Container ID: 4, PDB Name: NTAP_PDB2

65      14   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/sysaux.278.1201729279
        Container ID: 4, PDB Name: NTAP_PDB2

66      15   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/undotbs1.276.1201729279
        Container ID: 4, PDB Name: NTAP_PDB2

67      16   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/users.280.1201729301
        Container ID: 4, PDB Name: NTAP_PDB2

68      17   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/system.282.1201729301
        Container ID: 5, PDB Name: NTAP_PDB3

69      18   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/sysaux.283.1201729301
        Container ID: 5, PDB Name: NTAP_PDB3

70      19   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/undotbs1.281.1201729301
        Container ID: 5, PDB Name: NTAP_PDB3

71      20   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/users.285.1201729323
        Container ID: 5, PDB Name: NTAP_PDB3

72      21   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.286.1201793019
        Container ID: 3, PDB Name: NTAP_PDB1

73      22   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.287.1201793419
        Container ID: 3, PDB Name: NTAP_PDB1

74      23   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.288.1201793535
        Container ID: 4, PDB Name: NTAP_PDB2

75      24   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.289.1201793665
        Container ID: 5, PDB Name: NTAP_PDB3

76      25   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.290.1201794401
        Container ID: 3, PDB Name: NTAP_PDB1

77      26   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.291.1201795153
        Container ID: 4, PDB Name: NTAP_PDB2

78      27   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.292.1201795207
        Container ID: 5, PDB Name: NTAP_PDB3

79      28   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.293.1201795271
        Container ID: 3, PDB Name: NTAP_PDB1

80      29   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.294.1201796261
        Container ID: 4, PDB Name: NTAP_PDB2

81      30   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.295.1201797317
        Container ID: 4, PDB Name: NTAP_PDB2

82      31   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.296.1201797343
        Container ID: 5, PDB Name: NTAP_PDB3

83      32   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.297.1201797351
        Container ID: 3, PDB Name: NTAP_PDB1

84      33   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.298.1201800805
        Container ID: 3, PDB Name: NTAP_PDB1

85      34   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.300.1201800829
        Container ID: 4, PDB Name: NTAP_PDB2

86      35   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.299.1201800821
        Container ID: 5, PDB Name: NTAP_PDB3

87      36   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.301.1201801969
        Container ID: 3, PDB Name: NTAP_PDB1

88      37   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.302.1201802025
        Container ID: 4, PDB Name: NTAP_PDB2

89      38   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.303.1201802375
        Container ID: 5, PDB Name: NTAP_PDB3

90      39   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.304.1201803375
        Container ID: 4, PDB Name: NTAP_PDB2

91      40   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.305.1201803381
        Container ID: 5, PDB Name: NTAP_PDB3

92      41   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.306.1201803399
        Container ID: 3, PDB Name: NTAP_PDB1

93      42   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.307.1201804601
        Container ID: 4, PDB Name: NTAP_PDB2

94      43   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.308.1201804629
        Container ID: 5, PDB Name: NTAP_PDB3

95      44   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.309.1201804651
        Container ID: 3, PDB Name: NTAP_PDB1

96      45   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.310.1201806031
        Container ID: 5, PDB Name: NTAP_PDB3

97      46   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.312.1201806095
        Container ID: 3, PDB Name: NTAP_PDB1

98      47   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.311.1201806051
        Container ID: 4, PDB Name: NTAP_PDB2

99      48   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.313.1201873549
        Container ID: 4, PDB Name: NTAP_PDB2

100     49   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.314.1201873563
        Container ID: 5, PDB Name: NTAP_PDB3

101     50   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.315.1201875477
        Container ID: 5, PDB Name: NTAP_PDB3


....
. Purgez les fichiers de données désormais obsolètes sur le stockage principal s'ils existent pour libérer de l'espace et/ou effacer l'enregistrement.
+
....

RMAN> delete copy of database;

allocated channel: ORA_DISK_1
channel ORA_DISK_1: SID=137 device type=DISK
List of Datafile Copies
=======================

Key     File S Completion Time Ckp SCN    Ckp Time        Sparse
------- ---- - --------------- ---------- --------------- ------
53      1    A 27-MAY-25       2901679    27-MAY-25       NO
        Name: +DATA/NTAP/DATAFILE/system.257.1201727295

54      3    A 27-MAY-25       2901679    27-MAY-25       NO
        Name: +DATA/NTAP/DATAFILE/sysaux.258.1201727339

55      4    A 27-MAY-25       2901679    27-MAY-25       NO
        Name: +DATA/NTAP/DATAFILE/undotbs1.259.1201727365

56      5    A 27-MAY-25       2377077    21-MAY-25       NO
        Name: +DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/system.266.1201728307
        Container ID: 2, PDB Name: PDB$SEED

57      6    A 27-MAY-25       2377077    21-MAY-25       NO
        Name: +DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/sysaux.267.1201728307
        Container ID: 2, PDB Name: PDB$SEED

58      7    A 27-MAY-25       2901679    27-MAY-25       NO
        Name: +DATA/NTAP/DATAFILE/users.260.1201727365

59      8    A 27-MAY-25       2377077    21-MAY-25       NO
        Name: +DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/undotbs1.268.1201728307
        Container ID: 2, PDB Name: PDB$SEED

60      9    A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/system.272.1201729255
        Container ID: 3, PDB Name: NTAP_PDB1

61      10   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/sysaux.273.1201729255
        Container ID: 3, PDB Name: NTAP_PDB1

62      11   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/undotbs1.271.1201729255
        Container ID: 3, PDB Name: NTAP_PDB1

63      12   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/users.275.1201729277
        Container ID: 3, PDB Name: NTAP_PDB1

64      13   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/system.277.1201729279
        Container ID: 4, PDB Name: NTAP_PDB2

65      14   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/sysaux.278.1201729279
        Container ID: 4, PDB Name: NTAP_PDB2

66      15   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/undotbs1.276.1201729279
        Container ID: 4, PDB Name: NTAP_PDB2

67      16   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/users.280.1201729301
        Container ID: 4, PDB Name: NTAP_PDB2

68      17   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/system.282.1201729301
        Container ID: 5, PDB Name: NTAP_PDB3

69      18   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/sysaux.283.1201729301
        Container ID: 5, PDB Name: NTAP_PDB3

70      19   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/undotbs1.281.1201729301
        Container ID: 5, PDB Name: NTAP_PDB3

71      20   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/users.285.1201729323
        Container ID: 5, PDB Name: NTAP_PDB3

72      21   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.286.1201793019
        Container ID: 3, PDB Name: NTAP_PDB1

73      22   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.287.1201793419
        Container ID: 3, PDB Name: NTAP_PDB1

74      23   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.288.1201793535
        Container ID: 4, PDB Name: NTAP_PDB2

75      24   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.289.1201793665
        Container ID: 5, PDB Name: NTAP_PDB3

76      25   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.290.1201794401
        Container ID: 3, PDB Name: NTAP_PDB1

77      26   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.291.1201795153
        Container ID: 4, PDB Name: NTAP_PDB2

78      27   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.292.1201795207
        Container ID: 5, PDB Name: NTAP_PDB3

79      28   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.293.1201795271
        Container ID: 3, PDB Name: NTAP_PDB1

80      29   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.294.1201796261
        Container ID: 4, PDB Name: NTAP_PDB2

81      30   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.295.1201797317
        Container ID: 4, PDB Name: NTAP_PDB2

82      31   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.296.1201797343
        Container ID: 5, PDB Name: NTAP_PDB3

83      32   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.297.1201797351
        Container ID: 3, PDB Name: NTAP_PDB1

84      33   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.298.1201800805
        Container ID: 3, PDB Name: NTAP_PDB1

85      34   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.300.1201800829
        Container ID: 4, PDB Name: NTAP_PDB2

86      35   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.299.1201800821
        Container ID: 5, PDB Name: NTAP_PDB3

87      36   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.301.1201801969
        Container ID: 3, PDB Name: NTAP_PDB1

88      37   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.302.1201802025
        Container ID: 4, PDB Name: NTAP_PDB2

89      38   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.303.1201802375
        Container ID: 5, PDB Name: NTAP_PDB3

90      39   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.304.1201803375
        Container ID: 4, PDB Name: NTAP_PDB2

91      40   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.305.1201803381
        Container ID: 5, PDB Name: NTAP_PDB3

92      41   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.306.1201803399
        Container ID: 3, PDB Name: NTAP_PDB1

93      42   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.307.1201804601
        Container ID: 4, PDB Name: NTAP_PDB2

94      43   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.308.1201804629
        Container ID: 5, PDB Name: NTAP_PDB3

95      44   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.309.1201804651
        Container ID: 3, PDB Name: NTAP_PDB1

96      45   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.310.1201806031
        Container ID: 5, PDB Name: NTAP_PDB3

97      46   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.312.1201806095
        Container ID: 3, PDB Name: NTAP_PDB1

98      47   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.311.1201806051
        Container ID: 4, PDB Name: NTAP_PDB2

99      48   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.313.1201873549
        Container ID: 4, PDB Name: NTAP_PDB2

100     49   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.314.1201873563
        Container ID: 5, PDB Name: NTAP_PDB3

101     50   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.315.1201875477
        Container ID: 5, PDB Name: NTAP_PDB3


Do you really want to delete the above objects (enter YES or NO)? YES
deleted datafile copy
datafile copy file name=+DATA/NTAP/DATAFILE/system.257.1201727295 RECID=53 STAMP=1202233336
deleted datafile copy
datafile copy file name=+DATA/NTAP/DATAFILE/sysaux.258.1201727339 RECID=54 STAMP=1202233336
deleted datafile copy
datafile copy file name=+DATA/NTAP/DATAFILE/undotbs1.259.1201727365 RECID=55 STAMP=1202233336
deleted datafile copy
datafile copy file name=+DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/system.266.1201728307 RECID=56 STAMP=1202233336
deleted datafile copy
datafile copy file name=+DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/sysaux.267.1201728307 RECID=57 STAMP=1202233336
deleted datafile copy
datafile copy file name=+DATA/NTAP/DATAFILE/users.260.1201727365 RECID=58 STAMP=1202233336
deleted datafile copy
datafile copy file name=+DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/undotbs1.268.1201728307 RECID=59 STAMP=1202233336
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/system.272.1201729255 RECID=60 STAMP=1202233336
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/sysaux.273.1201729255 RECID=61 STAMP=1202233336
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/undotbs1.271.1201729255 RECID=62 STAMP=1202233336
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/users.275.1201729277 RECID=63 STAMP=1202233336
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/system.277.1201729279 RECID=64 STAMP=1202233336
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/sysaux.278.1201729279 RECID=65 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/undotbs1.276.1201729279 RECID=66 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/users.280.1201729301 RECID=67 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/system.282.1201729301 RECID=68 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/sysaux.283.1201729301 RECID=69 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/undotbs1.281.1201729301 RECID=70 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/users.285.1201729323 RECID=71 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.286.1201793019 RECID=72 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.287.1201793419 RECID=73 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.288.1201793535 RECID=74 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.289.1201793665 RECID=75 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.290.1201794401 RECID=76 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.291.1201795153 RECID=77 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.292.1201795207 RECID=78 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.293.1201795271 RECID=79 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.294.1201796261 RECID=80 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.295.1201797317 RECID=81 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.296.1201797343 RECID=82 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.297.1201797351 RECID=83 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.298.1201800805 RECID=84 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.300.1201800829 RECID=85 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.299.1201800821 RECID=86 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.301.1201801969 RECID=87 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.302.1201802025 RECID=88 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.303.1201802375 RECID=89 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.304.1201803375 RECID=90 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.305.1201803381 RECID=91 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.306.1201803399 RECID=92 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.307.1201804601 RECID=93 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.308.1201804629 RECID=94 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.309.1201804651 RECID=95 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.310.1201806031 RECID=96 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.312.1201806095 RECID=97 STAMP=1202233339
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.311.1201806051 RECID=98 STAMP=1202233339
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.313.1201873549 RECID=99 STAMP=1202233339
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.314.1201873563 RECID=100 STAMP=1202233339
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.315.1201875477 RECID=101 STAMP=1202233339
Deleted 49 objects


RMAN> list copy of database;

specification does not match any datafile copy in the repository

....
. Révisez le script de sauvegarde et de fusion RMAN pour qu'il pointe vers le stockage principal et, dans notre cas de test, vers le groupe de disques ASM + DATA dans la définition du canal RMAN. Exécutez le script de sauvegarde révisé pour créer une nouvelle copie d'image sur le stockage principal.
+
....

RMAN> @/home/oracle/rman_bkup_merge.cmd.1

RMAN> RUN
2> {
3>   allocate channel c1 device type disk format '+DATA';
4>   allocate channel c2 device type disk format '+DATA';
5>   allocate channel c3 device type disk format '+DATA';
6>   allocate channel c4 device type disk format '+DATA';
7>   delete obsolete;
8>   sql 'alter system archive log current';
9>   recover copy of database with tag 'OraCopyBKUPonGCNV_level_0';
10>   backup incremental level 1 copies=1 for recover of copy with tag 'OraCopyBKUPonGCNV_level_0' database;
11> }
released channel: ORA_DISK_1
allocated channel: c1
channel c1: SID=137 device type=DISK

allocated channel: c2
channel c2: SID=397 device type=DISK

allocated channel: c3
channel c3: SID=390 device type=DISK

allocated channel: c4
channel c4: SID=274 device type=DISK

RMAN retention policy will be applied to the command
RMAN retention policy is set to redundancy 1
Deleting the following obsolete backups and copies:
Type                 Key    Completion Time    Filename/Handle
-------------------- ------ ------------------ --------------------
Backup Set           12     24-MAY-25
  Backup Piece       12     24-MAY-25          /nfsgcnv/archlog/NTAP/autobackup/2025_05_24/o1_mf_s_1201919173_n32cl775_.bkp
deleted backup piece
backup piece handle=/nfsgcnv/archlog/NTAP/autobackup/2025_05_24/o1_mf_s_1201919173_n32cl775_.bkp RECID=12 STAMP=1201919175
Deleted 1 objects


sql statement: alter system archive log current

Starting recover at 27-MAY-25
no copy of datafile 1 found to recover
no copy of datafile 3 found to recover
no copy of datafile 4 found to recover
no copy of datafile 5 found to recover
no copy of datafile 6 found to recover
no copy of datafile 7 found to recover
no copy of datafile 8 found to recover
no copy of datafile 9 found to recover
no copy of datafile 10 found to recover
no copy of datafile 11 found to recover
no copy of datafile 12 found to recover
no copy of datafile 13 found to recover
no copy of datafile 14 found to recover
no copy of datafile 15 found to recover
no copy of datafile 16 found to recover
no copy of datafile 17 found to recover
no copy of datafile 18 found to recover
no copy of datafile 19 found to recover
no copy of datafile 20 found to recover
no copy of datafile 21 found to recover
no copy of datafile 22 found to recover
no copy of datafile 23 found to recover
no copy of datafile 24 found to recover
no copy of datafile 25 found to recover
no copy of datafile 26 found to recover
no copy of datafile 27 found to recover
no copy of datafile 28 found to recover
no copy of datafile 29 found to recover
no copy of datafile 30 found to recover
no copy of datafile 31 found to recover
no copy of datafile 32 found to recover
no copy of datafile 33 found to recover
no copy of datafile 34 found to recover
no copy of datafile 35 found to recover
no copy of datafile 36 found to recover
no copy of datafile 37 found to recover
no copy of datafile 38 found to recover
no copy of datafile 39 found to recover
no copy of datafile 40 found to recover
no copy of datafile 41 found to recover
no copy of datafile 42 found to recover
no copy of datafile 43 found to recover
no copy of datafile 44 found to recover
no copy of datafile 45 found to recover
no copy of datafile 46 found to recover
no copy of datafile 47 found to recover
no copy of datafile 48 found to recover
no copy of datafile 49 found to recover
no copy of datafile 50 found to recover
Finished recover at 27-MAY-25

Starting backup at 27-MAY-25
no parent backup or copy of datafile 1 found
no parent backup or copy of datafile 3 found
no parent backup or copy of datafile 4 found
no parent backup or copy of datafile 7 found
no parent backup or copy of datafile 6 found
no parent backup or copy of datafile 5 found
no parent backup or copy of datafile 8 found
no parent backup or copy of datafile 21 found
no parent backup or copy of datafile 22 found
no parent backup or copy of datafile 25 found
no parent backup or copy of datafile 28 found
no parent backup or copy of datafile 32 found
no parent backup or copy of datafile 33 found
no parent backup or copy of datafile 36 found
no parent backup or copy of datafile 41 found
no parent backup or copy of datafile 44 found
no parent backup or copy of datafile 46 found
no parent backup or copy of datafile 10 found
no parent backup or copy of datafile 9 found
no parent backup or copy of datafile 11 found
no parent backup or copy of datafile 12 found
no parent backup or copy of datafile 23 found
no parent backup or copy of datafile 26 found
no parent backup or copy of datafile 29 found
no parent backup or copy of datafile 30 found
no parent backup or copy of datafile 34 found
no parent backup or copy of datafile 37 found
no parent backup or copy of datafile 39 found
no parent backup or copy of datafile 42 found
no parent backup or copy of datafile 47 found
no parent backup or copy of datafile 48 found
no parent backup or copy of datafile 14 found
no parent backup or copy of datafile 13 found
no parent backup or copy of datafile 15 found
no parent backup or copy of datafile 16 found
no parent backup or copy of datafile 24 found
no parent backup or copy of datafile 27 found
no parent backup or copy of datafile 31 found
no parent backup or copy of datafile 35 found
no parent backup or copy of datafile 38 found
no parent backup or copy of datafile 40 found
no parent backup or copy of datafile 43 found
no parent backup or copy of datafile 45 found
no parent backup or copy of datafile 49 found
no parent backup or copy of datafile 50 found
no parent backup or copy of datafile 18 found
no parent backup or copy of datafile 17 found
no parent backup or copy of datafile 19 found
no parent backup or copy of datafile 20 found
channel c1: starting datafile copy
input datafile file number=00021 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-21_0c3q6gvm
channel c2: starting datafile copy
input datafile file number=00022 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-22_0d3q6gvm
channel c3: starting datafile copy
input datafile file number=00025 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-25_0e3q6gvn
channel c4: starting datafile copy
input datafile file number=00028 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-28_0f3q6gvn
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.313.1202239779 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=148 STAMP=1202243608
channel c2: datafile copy complete, elapsed time: 01:03:56
channel c2: starting datafile copy
input datafile file number=00032 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-32_0g3q6lkl
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.311.1202239779 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=149 STAMP=1202243617
channel c3: datafile copy complete, elapsed time: 01:03:60
channel c3: starting datafile copy
input datafile file number=00033 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-33_0h3q6lmf
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.315.1202239779 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=150 STAMP=1202243621
channel c1: datafile copy complete, elapsed time: 01:04:03
channel c1: starting datafile copy
input datafile file number=00036 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-36_0i3q6ln9
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.314.1202239779 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=151 STAMP=1202243625
channel c4: datafile copy complete, elapsed time: 01:04:11
channel c4: starting datafile copy
input datafile file number=00041 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-41_0j3q6ltd
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.312.1202243617 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=153 STAMP=1202247449
channel c2: datafile copy complete, elapsed time: 01:03:60
channel c2: starting datafile copy
input datafile file number=00044 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-44_0k3q6qdc
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.310.1202243619 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=152 STAMP=1202247446
channel c3: datafile copy complete, elapsed time: 01:03:57
channel c3: starting datafile copy
input datafile file number=00046 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-46_0l3q6qdc
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.308.1202243631 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=154 STAMP=1202247463
channel c4: datafile copy complete, elapsed time: 01:04:02
channel c4: starting datafile copy
input datafile file number=00023 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-23_0m3q6qdr
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.309.1202243625 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=155 STAMP=1202247473
channel c1: datafile copy complete, elapsed time: 01:04:12
channel c1: starting datafile copy
input datafile file number=00026 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-26_0n3q6qq7
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.307.1202247457 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=156 STAMP=1202251305
channel c2: datafile copy complete, elapsed time: 01:04:15
channel c2: starting datafile copy
input datafile file number=00029 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-29_0o3q6v5h
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.306.1202247457 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=157 STAMP=1202251305
channel c3: datafile copy complete, elapsed time: 01:04:15
channel c3: starting datafile copy
input datafile file number=00030 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-30_0p3q6v6b
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.305.1202247473 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=158 STAMP=1202251311
channel c4: datafile copy complete, elapsed time: 01:04:01
channel c4: starting datafile copy
input datafile file number=00034 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-34_0q3q6v7o
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.304.1202247477 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=159 STAMP=1202251313
channel c1: datafile copy complete, elapsed time: 01:03:59
channel c1: starting datafile copy
input datafile file number=00037 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-37_0r3q6vhu
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.302.1202251311 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=160 STAMP=1202255139
channel c3: datafile copy complete, elapsed time: 01:03:48
channel c3: starting datafile copy
input datafile file number=00039 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-39_0s3q73th
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.303.1202251311 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=161 STAMP=1202255150
channel c2: datafile copy complete, elapsed time: 01:04:04
channel c2: starting datafile copy
input datafile file number=00042 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-42_0t3q73uv
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.301.1202251313 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=162 STAMP=1202255155
channel c4: datafile copy complete, elapsed time: 01:04:03
channel c4: starting datafile copy
input datafile file number=00047 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-47_0u3q747i
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.299.1202251315 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=163 STAMP=1202255166
channel c1: datafile copy complete, elapsed time: 01:04:17
channel c1: starting datafile copy
input datafile file number=00048 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-48_0v3q74cd
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.298.1202255157 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=164 STAMP=1202258984
channel c2: datafile copy complete, elapsed time: 01:03:51
channel c2: starting datafile copy
input datafile file number=00024 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-24_103q78l8
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.297.1202255157 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=165 STAMP=1202258992
channel c4: datafile copy complete, elapsed time: 01:03:59
channel c4: starting datafile copy
input datafile file number=00027 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-27_113q78nk
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.296.1202255171 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=166 STAMP=1202259002
channel c1: datafile copy complete, elapsed time: 01:03:59
channel c1: starting datafile copy
input datafile file number=00031 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-31_123q791p
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.300.1202255141 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=167 STAMP=1202259003
channel c3: datafile copy complete, elapsed time: 01:04:30
channel c3: starting datafile copy
input datafile file number=00035 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-35_133q795m
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.295.1202258989 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=168 STAMP=1202262811
channel c2: datafile copy complete, elapsed time: 01:03:49
channel c2: starting datafile copy
input datafile file number=00038 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-38_143q7dd7
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.294.1202258997 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=169 STAMP=1202262817
channel c4: datafile copy complete, elapsed time: 01:03:43
channel c4: starting datafile copy
input datafile file number=00040 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-40_153q7did
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.292.1202259011 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=170 STAMP=1202262857
channel c3: datafile copy complete, elapsed time: 01:04:13
channel c3: starting datafile copy
input datafile file number=00043 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-43_163q7dqp
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.293.1202259011 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=171 STAMP=1202262866
channel c1: datafile copy complete, elapsed time: 01:04:16
channel c1: starting datafile copy
input datafile file number=00045 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-45_173q7e17
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.291.1202262817 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=172 STAMP=1202266648
channel c2: datafile copy complete, elapsed time: 01:03:56
channel c2: starting datafile copy
input datafile file number=00049 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-49_183q7i95
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.290.1202262819 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=173 STAMP=1202266665
channel c4: datafile copy complete, elapsed time: 01:04:10
channel c4: starting datafile copy
input datafile file number=00050 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-50_193q7i95
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.288.1202262869 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=174 STAMP=1202266695
channel c1: datafile copy complete, elapsed time: 01:03:56
channel c1: starting datafile copy
input datafile file number=00001 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-1_1a3q7ii2
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.289.1202262865 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=175 STAMP=1202266710
channel c3: datafile copy complete, elapsed time: 01:04:08
channel c3: starting datafile copy
input datafile file number=00003 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-3_1b3q7io5
output file name=+DATA/NTAP/DATAFILE/sysaux.281.1202266713 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=176 STAMP=1202266836
channel c3: datafile copy complete, elapsed time: 00:02:06
channel c3: starting datafile copy
input datafile file number=00004 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-4_1c3q7ipa
output file name=+DATA/NTAP/DATAFILE/system.285.1202266707 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=177 STAMP=1202266837
channel c1: datafile copy complete, elapsed time: 00:02:14
channel c1: starting datafile copy
input datafile file number=00010 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-10_1d3q7isu
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/sysaux.282.1202266839 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=178 STAMP=1202266904
channel c1: datafile copy complete, elapsed time: 00:01:15
channel c1: starting datafile copy
input datafile file number=00014 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-14_1e3q7itp
output file name=+DATA/NTAP/DATAFILE/undotbs1.283.1202266839 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=179 STAMP=1202266919
channel c3: datafile copy complete, elapsed time: 00:01:24
channel c3: starting datafile copy
input datafile file number=00018 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-18_1f3q7j0e
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/sysaux.280.1202266915 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=180 STAMP=1202266976
channel c1: datafile copy complete, elapsed time: 00:01:03
channel c1: starting datafile copy
input datafile file number=00006 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-6_1g3q7j0e
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/sysaux.276.1202266923 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=181 STAMP=1202266987
channel c3: datafile copy complete, elapsed time: 00:01:10
channel c3: starting datafile copy
input datafile file number=00009 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-9_1h3q7j35
output file name=+DATA/NTAP/35AD01790801A78FE063060B460ABC41/DATAFILE/sysaux.278.1202266977 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=182 STAMP=1202267033
channel c1: datafile copy complete, elapsed time: 00:01:00
channel c1: starting datafile copy
input datafile file number=00013 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-13_1i3q7j3d
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/system.277.1202266995 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=183 STAMP=1202267043
channel c3: datafile copy complete, elapsed time: 00:00:53
channel c3: starting datafile copy
input datafile file number=00017 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-17_1j3q7j56
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/system.275.1202267039 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=184 STAMP=1202267089
channel c1: datafile copy complete, elapsed time: 00:00:53
channel c1: starting datafile copy
input datafile file number=00005 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-5_1k3q7j5a
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/system.271.1202267047 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=185 STAMP=1202267099
channel c3: datafile copy complete, elapsed time: 00:01:00
channel c3: starting datafile copy
input datafile file number=00011 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-11_1l3q7j80
output file name=+DATA/NTAP/35AD01790801A78FE063060B460ABC41/DATAFILE/system.273.1202267093 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=186 STAMP=1202267137
channel c1: datafile copy complete, elapsed time: 00:00:51
channel c1: starting datafile copy
input datafile file number=00008 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-8_1m3q7j82
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/undotbs1.272.1202267109 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=187 STAMP=1202267138
channel c3: datafile copy complete, elapsed time: 00:00:35
channel c3: starting datafile copy
input datafile file number=00015 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-15_1n3q7j9p
output file name=+DATA/NTAP/35AD01790801A78FE063060B460ABC41/DATAFILE/undotbs1.268.1202267143 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=188 STAMP=1202267172
channel c1: datafile copy complete, elapsed time: 00:00:36
channel c1: starting datafile copy
input datafile file number=00019 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-19_1o3q7j9p
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/undotbs1.260.1202267143 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=189 STAMP=1202267172
channel c3: datafile copy complete, elapsed time: 00:00:35
channel c3: starting datafile copy
input datafile file number=00007 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-7_1p3q7jbg
output file name=+DATA/NTAP/DATAFILE/users.266.1202267179 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=190 STAMP=1202267179
channel c3: datafile copy complete, elapsed time: 00:00:01
channel c3: starting datafile copy
input datafile file number=00012 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-12_1q3q7jbh
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/users.259.1202267181 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=191 STAMP=1202267182
channel c3: datafile copy complete, elapsed time: 00:00:03
channel c3: starting datafile copy
input datafile file number=00016 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-16_1r3q7jbi
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/users.258.1202267185 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=192 STAMP=1202267185
channel c3: datafile copy complete, elapsed time: 00:00:03
channel c3: starting datafile copy
input datafile file number=00020 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-20_1s3q7jbi
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/users.257.1202267189 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=193 STAMP=1202267190
channel c3: datafile copy complete, elapsed time: 00:00:03
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/undotbs1.267.1202267179 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=194 STAMP=1202267199
channel c1: datafile copy complete, elapsed time: 00:00:24
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.287.1202266655 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=195 STAMP=1202268827
channel c2: datafile copy complete, elapsed time: 00:36:19
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.286.1202266669 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=196 STAMP=1202268833
channel c4: datafile copy complete, elapsed time: 00:36:14
Finished backup at 28-MAY-25

Starting Control File and SPFILE Autobackup at 28-MAY-25
piece handle=/nfsgcnv/archlog/NTAP/autobackup/2025_05_28/o1_mf_s_1202268842_n3f11d04_.bkp comment=NONE
Finished Control File and SPFILE Autobackup at 28-MAY-25
released channel: c1
released channel: c2
released channel: c3
released channel: c4

RMAN> **end-of-file**

RMAN>

....
. Validez qu’une nouvelle copie d’image VLDB est désormais créée sur le stockage principal.
+
....

RMAN> list copy of database;

List of Datafile Copies
=======================

Key     File S Completion Time Ckp SCN    Ckp Time        Sparse
------- ---- - --------------- ---------- --------------- ------
177     1    A 28-MAY-25       2951405    28-MAY-25       NO
        Name: +DATA/NTAP/DATAFILE/system.285.1202266707
        Tag: ORACOPYBKUPONGCNV_LEVEL_0

176     3    A 28-MAY-25       2951427    28-MAY-25       NO
        Name: +DATA/NTAP/DATAFILE/sysaux.281.1202266713
        Tag: ORACOPYBKUPONGCNV_LEVEL_0

179     4    A 28-MAY-25       2951801    28-MAY-25       NO
        Name: +DATA/NTAP/DATAFILE/undotbs1.283.1202266839
        Tag: ORACOPYBKUPONGCNV_LEVEL_0

186     5    A 28-MAY-25       2377077    21-MAY-25       NO
        Name: +DATA/NTAP/35AD01790801A78FE063060B460ABC41/DATAFILE/system.273.1202267093
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 2, PDB Name: PDB$SEED

182     6    A 28-MAY-25       2377077    21-MAY-25       NO
        Name: +DATA/NTAP/35AD01790801A78FE063060B460ABC41/DATAFILE/sysaux.278.1202266977
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 2, PDB Name: PDB$SEED

190     7    A 28-MAY-25       2952103    28-MAY-25       NO
        Name: +DATA/NTAP/DATAFILE/users.266.1202267179
        Tag: ORACOPYBKUPONGCNV_LEVEL_0

188     8    A 28-MAY-25       2377077    21-MAY-25       NO
        Name: +DATA/NTAP/35AD01790801A78FE063060B460ABC41/DATAFILE/undotbs1.268.1202267143
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 2, PDB Name: PDB$SEED

183     9    A 28-MAY-25       2951919    28-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/system.277.1202266995
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

178     10   A 28-MAY-25       2951806    28-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/sysaux.282.1202266839
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

187     11   A 28-MAY-25       2952000    28-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/undotbs1.272.1202267109
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

191     12   A 28-MAY-25       2952108    28-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/users.259.1202267181
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

184     13   A 28-MAY-25       2951954    28-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/system.275.1202267039
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

180     14   A 28-MAY-25       2951863    28-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/sysaux.280.1202266915
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

189     15   A 28-MAY-25       2952084    28-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/undotbs1.260.1202267143
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

192     16   A 28-MAY-25       2952113    28-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/users.258.1202267185
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

185     17   A 28-MAY-25       2951961    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/system.271.1202267047
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

181     18   A 28-MAY-25       2951870    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/sysaux.276.1202266923
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

194     19   A 28-MAY-25       2952099    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/undotbs1.267.1202267179
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

193     20   A 28-MAY-25       2952119    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/users.257.1202267189
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

150     21   A 27-MAY-25       2912326    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.315.1202239779
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

148     22   A 27-MAY-25       2912334    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.313.1202239779
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

158     23   A 27-MAY-25       2919519    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.305.1202247473
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

168     24   A 28-MAY-25       2943784    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.295.1202258989
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

149     25   A 27-MAY-25       2912330    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.311.1202239779
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

159     26   A 27-MAY-25       2919524    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.304.1202247477
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

169     27   A 28-MAY-25       2943790    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.294.1202258997
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

151     28   A 27-MAY-25       2912331    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.314.1202239779
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

161     29   A 27-MAY-25       2936579    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.303.1202251311
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

160     30   A 27-MAY-25       2936583    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.302.1202251311
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

171     31   A 28-MAY-25       2943799    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.293.1202259011
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

153     32   A 27-MAY-25       2915938    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.312.1202243617
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

152     33   A 27-MAY-25       2915943    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.310.1202243619
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

162     34   A 27-MAY-25       2936588    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.301.1202251313
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

170     35   A 28-MAY-25       2943803    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.292.1202259011
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

155     36   A 27-MAY-25       2915949    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.309.1202243625
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

163     37   A 27-MAY-25       2936592    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.299.1202251315
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

172     38   A 28-MAY-25       2947486    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.291.1202262817
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

167     39   A 28-MAY-25       2940255    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.300.1202255141
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

173     40   A 28-MAY-25       2947490    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.290.1202262819
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

154     41   A 27-MAY-25       2915970    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.308.1202243631
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

164     42   A 28-MAY-25       2940264    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.298.1202255157
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

175     43   A 28-MAY-25       2947509    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.289.1202262865
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

156     44   A 27-MAY-25       2919491    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.307.1202247457
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

174     45   A 28-MAY-25       2947515    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.288.1202262869
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

157     46   A 27-MAY-25       2919495    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.306.1202247457
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

165     47   A 28-MAY-25       2940268    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.297.1202255157
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

166     48   A 28-MAY-25       2940277    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.296.1202255171
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

195     49   A 28-MAY-25       2951380    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.287.1202266655
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

196     50   A 28-MAY-25       2951389    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.286.1202266669
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3


....
. Insérez une nouvelle ligne de test dans la table de test et vérifiez que le retour à la copie d'image sur le stockage principal récupère toutes les transactions.
+
....

[oracle@orap ~]$ sqlplus / as sysdba

SQL*Plus: Release 19.0.0.0.0 - Production on Wed May 28 20:04:53 2025
Version 19.18.0.0.0

Copyright (c) 1982, 2022, Oracle.  All rights reserved.


Connected to:
Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.18.0.0.0

SQL> show pdbs

    CON_ID CON_NAME                       OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
         2 PDB$SEED                       READ ONLY  NO
         3 NTAP_PDB1                      READ WRITE NO
         4 NTAP_PDB2                      READ WRITE NO
         5 NTAP_PDB3                      READ WRITE NO
SQL> alter session set container=ntap_pdb1;

Session altered.

SQL> select * from test;

        ID
----------
DT
---------------------------------------------------------------------------
EVENT
--------------------------------------------------------------------------------
         1
27-MAY-25 05.35.44.000000 PM
validate a full recovery after a switch to DB backup copy


SQL> insert into test values(2, sysdate, 'Swing database back to primary storage from nfs backup mount on GCNV');

1 row created.

SQL> commit;

Commit complete.

SQL> select * from test;

        ID
----------
DT
---------------------------------------------------------------------------
EVENT
--------------------------------------------------------------------------------
         1
27-MAY-25 05.35.44.000000 PM
validate a full recovery after a switch to DB backup copy on GCNV

         2
28-MAY-25 08.09.34.000000 PM
Swing database back to primary storage from nfs backup mount on GCNV

        ID
----------
DT
---------------------------------------------------------------------------
EVENT
--------------------------------------------------------------------------------


SQL>

....
. Depuis RMAN, arrêtez la base de données pour revenir à la copie d'image de sauvegarde sur le stockage principal.
+
....

[oracle@orap ~]$ rman target / nocatalog

Recovery Manager: Release 19.0.0.0.0 - Production on Wed May 28 20:01:55 2025
Version 19.18.0.0.0

Copyright (c) 1982, 2019, Oracle and/or its affiliates.  All rights reserved.

connected to target database: NTAP (DBID=1379265854)
using target database control file instead of recovery catalog

RMAN> shutdown abort;

Oracle instance shut down

RMAN> startup mount;

connected to target database (not started)
Oracle instance started
database mounted

Total System Global Area    5620363744 bytes

Fixed Size                     9175520 bytes
Variable Size               1023410176 bytes
Database Buffers            4580179968 bytes
Redo Buffers                   7598080 bytes

RMAN> switch database to copy;

datafile 1 switched to datafile copy "+DATA/NTAP/DATAFILE/system.285.1202266707"
datafile 3 switched to datafile copy "+DATA/NTAP/DATAFILE/sysaux.281.1202266713"
datafile 4 switched to datafile copy "+DATA/NTAP/DATAFILE/undotbs1.283.1202266839"
datafile 5 switched to datafile copy "+DATA/NTAP/35AD01790801A78FE063060B460ABC41/DATAFILE/system.273.1202267093"
datafile 6 switched to datafile copy "+DATA/NTAP/35AD01790801A78FE063060B460ABC41/DATAFILE/sysaux.278.1202266977"
datafile 7 switched to datafile copy "+DATA/NTAP/DATAFILE/users.266.1202267179"
datafile 8 switched to datafile copy "+DATA/NTAP/35AD01790801A78FE063060B460ABC41/DATAFILE/undotbs1.268.1202267143"
datafile 9 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/system.277.1202266995"
datafile 10 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/sysaux.282.1202266839"
datafile 11 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/undotbs1.272.1202267109"
datafile 12 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/users.259.1202267181"
datafile 13 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/system.275.1202267039"
datafile 14 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/sysaux.280.1202266915"
datafile 15 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/undotbs1.260.1202267143"
datafile 16 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/users.258.1202267185"
datafile 17 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/system.271.1202267047"
datafile 18 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/sysaux.276.1202266923"
datafile 19 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/undotbs1.267.1202267179"
datafile 20 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/users.257.1202267189"
datafile 21 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.315.1202239779"
datafile 22 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.313.1202239779"
datafile 23 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.305.1202247473"
datafile 24 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.295.1202258989"
datafile 25 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.311.1202239779"
datafile 26 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.304.1202247477"
datafile 27 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.294.1202258997"
datafile 28 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.314.1202239779"
datafile 29 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.303.1202251311"
datafile 30 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.302.1202251311"
datafile 31 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.293.1202259011"
datafile 32 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.312.1202243617"
datafile 33 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.310.1202243619"
datafile 34 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.301.1202251313"
datafile 35 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.292.1202259011"
datafile 36 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.309.1202243625"
datafile 37 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.299.1202251315"
datafile 38 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.291.1202262817"
datafile 39 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.300.1202255141"
datafile 40 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.290.1202262819"
datafile 41 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.308.1202243631"
datafile 42 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.298.1202255157"
datafile 43 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.289.1202262865"
datafile 44 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.307.1202247457"
datafile 45 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.288.1202262869"
datafile 46 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.306.1202247457"
datafile 47 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.297.1202255157"
datafile 48 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.296.1202255171"
datafile 49 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.287.1202266655"
datafile 50 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.286.1202266669"

RMAN> recover database;

Starting recover at 28-MAY-25
allocated channel: ORA_DISK_1
channel ORA_DISK_1: SID=139 device type=DISK

starting media recovery
media recovery complete, elapsed time: 00:00:07

Finished recover at 28-MAY-25

RMAN> alter database open;

Statement processed

RMAN>

....
. Validez que la base de données est désormais de retour au stockage principal.
+
....

RMAN> report schema;

Report of database schema for database with db_unique_name NTAP

List of Permanent Datafiles
===========================
File Size(MB) Tablespace           RB segs Datafile Name
---- -------- -------------------- ------- ------------------------
1    1070     SYSTEM               YES     +DATA/NTAP/DATAFILE/system.285.1202266707
3    1020     SYSAUX               NO      +DATA/NTAP/DATAFILE/sysaux.281.1202266713
4    680      UNDOTBS1             YES     +DATA/NTAP/DATAFILE/undotbs1.283.1202266839
5    400      PDB$SEED:SYSTEM      NO      +DATA/NTAP/35AD01790801A78FE063060B460ABC41/DATAFILE/system.273.1202267093
6    460      PDB$SEED:SYSAUX      NO      +DATA/NTAP/35AD01790801A78FE063060B460ABC41/DATAFILE/sysaux.278.1202266977
7    5        USERS                NO      +DATA/NTAP/DATAFILE/users.266.1202267179
8    235      PDB$SEED:UNDOTBS1    NO      +DATA/NTAP/35AD01790801A78FE063060B460ABC41/DATAFILE/undotbs1.268.1202267143
9    410      NTAP_PDB1:SYSTEM     YES     +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/system.277.1202266995
10   510      NTAP_PDB1:SYSAUX     NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/sysaux.282.1202266839
11   240      NTAP_PDB1:UNDOTBS1   YES     +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/undotbs1.272.1202267109
12   5        NTAP_PDB1:USERS      NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/users.259.1202267181
13   410      NTAP_PDB2:SYSTEM     YES     +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/system.275.1202267039
14   510      NTAP_PDB2:SYSAUX     NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/sysaux.280.1202266915
15   235      NTAP_PDB2:UNDOTBS1   YES     +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/undotbs1.260.1202267143
16   5        NTAP_PDB2:USERS      NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/users.258.1202267185
17   410      NTAP_PDB3:SYSTEM     YES     +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/system.271.1202267047
18   510      NTAP_PDB3:SYSAUX     NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/sysaux.276.1202266923
19   235      NTAP_PDB3:UNDOTBS1   YES     +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/undotbs1.267.1202267179
20   5        NTAP_PDB3:USERS      NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/users.257.1202267189
21   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.315.1202239779
22   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.313.1202239779
23   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.305.1202247473
24   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.295.1202258989
25   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.311.1202239779
26   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.304.1202247477
27   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.294.1202258997
28   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.314.1202239779
29   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.303.1202251311
30   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.302.1202251311
31   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.293.1202259011
32   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.312.1202243617
33   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.310.1202243619
34   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.301.1202251313
35   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.292.1202259011
36   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.309.1202243625
37   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.299.1202251315
38   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.291.1202262817
39   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.300.1202255141
40   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.290.1202262819
41   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.308.1202243631
42   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.298.1202255157
43   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.289.1202262865
44   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.307.1202247457
45   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.288.1202262869
46   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.306.1202247457
47   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.297.1202255157
48   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.296.1202255171
49   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.287.1202266655
50   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.286.1202266669

List of Temporary Files
=======================
File Size(MB) Tablespace           Maxsize(MB) Tempfile Name
---- -------- -------------------- ----------- --------------------
1    123      TEMP                 32767       +DATA/NTAP/TEMPFILE/temp.265.1201727469
2    123      PDB$SEED:TEMP        32767       +DATA/NTAP/35AD01790801A78FE063060B460ABC41/TEMPFILE/temp.269.1201728335
3    16384    NTAP_PDB1:TEMP       32767       +DATA/NTAP/35AD38314E81AF11E063060B460AE362/TEMPFILE/temp.274.1201729271
4    30720    NTAP_PDB2:TEMP       32767       +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/TEMPFILE/temp.279.1201729295
5    30720    NTAP_PDB3:TEMP       32767       +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/TEMPFILE/temp.284.1201729319


....
. Validez depuis sqlplus que toutes les transactions sont récupérées dans la table de test.
+
....

SQL> alter session set container=ntap_pdb1;

Session altered.

SQL> select * from test;

        ID
----------
DT
---------------------------------------------------------------------------
EVENT
--------------------------------------------------------------------------------
         1
27-MAY-25 05.35.44.000000 PM
validate a full recovery after a switch to DB backup copy on GCNV

         2
28-MAY-25 08.09.34.000000 PM
Swing database back to primary storage from nfs backup mount on GCNV

        ID
----------
DT
---------------------------------------------------------------------------
EVENT
--------------------------------------------------------------------------------


SQL> select systimestamp from dual;

SYSTIMESTAMP
---------------------------------------------------------------------------
28-MAY-25 08.17.55.895654 PM +00:00

SQL>


....
. Enfin, supprimez la copie d’image DB obsolète sur le stockage de sauvegarde GCNV et créez une nouvelle image de sauvegarde sur le stockage de sauvegarde GCNV pour terminer le cycle.


====


==== Récupération ponctuelle avec perte de tous les fichiers Oracle

[%collapsible%open]
====
En cas de panne entraînant la perte du stockage principal et/ou de l'hôte du serveur de base de données principal, toutes les transactions non enregistrées dans les fichiers journaux archivés seront perdues. Cependant, la copie de l'image de sauvegarde de votre base de données Oracle est très pratique sur le système de fichiers NFS GCNV. Vous pouvez rapidement restaurer la base de données principale sur le même serveur ou sur un serveur de secours, si disponible, grâce à l'image de sauvegarde. Cette section décrit les procédures de restauration étape par étape sur le serveur de base de données principal. Les méthodes de restauration sur un nouveau serveur de secours sont quasiment identiques ; toutefois, l'image de sauvegarde de la base de données doit être montée sur le serveur de secours avec la même pile logicielle Oracle installée et configurée.

. Insérez une ligne pour tester la table que nous avons créée précédemment pour la validation de récupération ponctuelle Oracle VLDB.
+
....

SQL> insert into test values(3, sysdate, 'validate a point-in-time recovery by switching to DB backup copy on GCNV');

1 row created.

SQL> commit;

Commit complete.

SQL> select * from test;

        ID
----------
DT
---------------------------------------------------------------------------
EVENT
--------------------------------------------------------------------------------
         1
27-MAY-25 05.35.44.000000 PM
validate a full recovery after a switch to DB backup copy on GCNV

         2
28-MAY-25 08.09.34.000000 PM
Swing database back to primary storage from nfs backup mount on GCNV

        ID
----------
DT
---------------------------------------------------------------------------
EVENT
--------------------------------------------------------------------------------

         3
29-MAY-25 03.22.22.000000 PM
validate a point-in-time recovery by switching to DB backup copy on GCNV

....
. Archivez le fichier journal actuel afin que la transaction soit poussée vers un fichier journal archivé.
+
....

SQL> alter session set container=cdb$root;

Session altered.

SQL> alter system archive log current;

System altered.

....
. Arrêtez l'hôte du serveur VLDB principal pour simuler une défaillance totale de l'hôte du serveur de stockage et de base de données.
. Si la récupération est effectuée sur un serveur de base de données de secours, assurez-vous qu'il s'agit du même système d'exploitation, de la même version et du même noyau de système d'exploitation corrigés que l'hôte du serveur de base de données principal. En outre, la même version et les mêmes correctifs d'Oracle ont été installés et configurés sur un serveur de base de données en attente avec option logicielle uniquement.
. Configurez également l'environnement Oracle sur le serveur de base de données de secours de la même manière que le serveur de base de données principal, comme oratab et l'utilisateur Oracle .bash_profile, etc. Il est recommandé de sauvegarder ces fichiers sur le point de montage NFS GCNV.
. La copie de l'image de sauvegarde de la base de données Oracle sur le système de fichiers NFS GCNV est ensuite montée sur le serveur de base de données de secours pour la restauration. Les procédures suivantes présentent les détails du processus.
+
En tant qu'utilisateur administrateur, créez le point de montage.

+
[source, cli]
----
sudo mkdir /nfsgcnv
----
+
En tant qu'utilisateur administrateur, montez le volume NFS qui stockait la copie de l'image de sauvegarde Oracle VLDB.

+
[source, cli]
----
sudo mount 10.165.128.5:/orap-bkup /nfsgcnv -o rw,bg,hard,vers=3,proto=tcp,timeo=600,rsize=262144,wsize=262144
----
. Vérifiez les journaux archivés Oracle disponibles sur le montage NFS d'GCNV pour la restauration et notez le dernier numéro de séquence du journal des fichiers journaux. Dans notre cas de test, c'était 27. Notre point de récupération peut atteindre le numéro de séquence du journal 28.
. En cas de récupération à partir d'un hôte de base de données de secours, en tant qu'utilisateur Oracle, définissez la variable ORACLE_HOME sur l'installation Oracle actuelle sur le serveur de base de données de secours et ORACLE_SID sur le SID de l'instance Oracle principale. Dans ce test, il s'agit de NTAP.
+
....

[oracle@ora-02 ~]$ export ORACLE_HOME=/u01/app/oracle/product/19.0.0/NTAP
[oracle@ora-02 ~]$ export ORACLE_SID=NTAP
[oracle@ora-02 ~]$ export PATH=$PATH:$ORACLE_HOME/bin

....
. En tant qu'utilisateur oracle, créez un fichier Oracle init générique dans le répertoire $ORACLE_HOME/dbs avec les répertoires d'administration appropriés configurés. Le plus important est d'avoir Oracle  `flash recovery area` Pointez vers le chemin de montage NFS GCNV tel que défini sur le serveur Oracle VLDB principal.  `flash recovery area` la configuration est présentée à la section `Setup Oracle RMAN incremental merge to image copy on GCNV for in-server VLDB backup`. Définissez le fichier de contrôle Oracle sur le système de fichiers de sauvegarde NFS GCNV.
+
[source, cli]
----
vi /home/oracle/initNTAP.ora
----
+
Avec les exemples d'entrées suivants :

+
....

*.audit_file_dest='/u01/app/oracle/admin/NTAP/adump'
*.audit_trail='db'
*.compatible='19.0.0'
*.control_files=('/nfsgcnv/oracopy/NTAP.ctl')
*.db_block_size=8192
*.db_create_file_dest='/nfsgcnv/oracopy/'
*.db_name='NTAP'
*.db_recovery_file_dest_size=85899345920
*.db_recovery_file_dest='/nfsgcnv/archlog/'
*.diagnostic_dest='/u01/app/oracle'
*.enable_pluggable_database=true
*.local_listener='LISTENER'
*.nls_language='AMERICAN'
*.nls_territory='AMERICA'
*.pga_aggregate_target=1024m
*.processes=320
*.remote_login_passwordfile='EXCLUSIVE'
*.sga_target=10240m


....
+
Le fichier d'initialisation ci-dessus doit être remplacé par le fichier d'initialisation de sauvegarde restauré à partir du serveur principal Oracle VLDB en cas de divergence.

. En tant qu'utilisateur Oracle, lancez RMAN pour exécuter la récupération Oracle sur l'hôte du serveur de base de données principal ou de secours. Commencez par démarrer l'instance Oracle dans  `nomount` État.
+
....

[oracle@orap ~]$ rman target / nocatalog

Recovery Manager: Release 19.0.0.0.0 - Production on Thu May 29 15:46:15 2025
Version 19.18.0.0.0

Copyright (c) 1982, 2019, Oracle and/or its affiliates.  All rights reserved.

connected to target database (not started)

RMAN> startup nomount pfile='/home/oracle/initNTAP.ora';

Oracle instance started

Total System Global Area   10737418000 bytes

Fixed Size                     9174800 bytes
Variable Size               1577058304 bytes
Database Buffers            9126805504 bytes
Redo Buffers                  24379392 bytes

....
. Définir l'ID de la base de données. L'ID de base de données peut être récupéré à partir du nom de fichier Oracle de la copie d'image sur le point de montage NFS GCNV.
+
....

RMAN> set dbid = 1379265854;

executing command: SET DBID

....
. Restaurez le fichier de contrôle à partir de la sauvegarde automatique. Si Oracle controlfile et spfile autopackup sont activés, ils sont sauvegardés à chaque cycle de sauvegarde et de fusion incrémentale. La dernière sauvegarde sera restaurée si plusieurs copies sont disponibles.
+
....

RMAN> restore controlfile from autobackup;

Starting restore at 29-MAY-25
allocated channel: ORA_DISK_1
channel ORA_DISK_1: SID=2 device type=DISK

recovery area destination: /nfsgcnv/archlog/
database name (or database unique name) used for search: NTAP
channel ORA_DISK_1: AUTOBACKUP /nfsgcnv/archlog/NTAP/autobackup/2025_05_29/o1_mf_s_1202395822_n3jx1hnf_.bkp found in the recovery area
channel ORA_DISK_1: looking for AUTOBACKUP on day: 20250529
channel ORA_DISK_1: restoring control file from AUTOBACKUP /nfsgcnv/archlog/NTAP/autobackup/2025_05_29/o1_mf_s_1202395822_n3jx1hnf_.bkp
channel ORA_DISK_1: control file restore from AUTOBACKUP complete
output file name=/nfsgcnv/oracopy/NTAP.ctl
Finished restore at 29-MAY-25


....
. Restaurez le fichier d'initialisation du fichier spfile vers le dossier $ORACLE_HOME/dbs pour mettre à jour le fichier de paramètres ultérieurement afin qu'il corresponde au VLDB principal.
+
....
RMAN> restore spfile to pfile '/u01/app/oracle/product/19.0.0/NTAP/dbs/initNTAP.ora' from autobackup;

Starting restore at 29-MAY-25
using channel ORA_DISK_1

recovery area destination: /nfsgcnv/archlog/
database name (or database unique name) used for search: NTAP
channel ORA_DISK_1: AUTOBACKUP /nfsgcnv/archlog/NTAP/autobackup/2025_05_29/o1_mf_s_1202395822_n3jx1hnf_.bkp found in the recovery area
channel ORA_DISK_1: looking for AUTOBACKUP on day: 20250529
channel ORA_DISK_1: restoring spfile from AUTOBACKUP /nfsgcnv/archlog/NTAP/autobackup/2025_05_29/o1_mf_s_1202395822_n3jx1hnf_.bkp
channel ORA_DISK_1: SPFILE restore from AUTOBACKUP complete
Finished restore at 29-MAY-25

....
. Monter le fichier de contrôle et valider la copie de l'image de sauvegarde de la base de données.
+
....

RMAN> alter database mount;

released channel: ORA_DISK_1
Statement processed

RMAN> list copy of database tag 'ORACOPYBKUPONGCNV_LEVEL_0';

List of Datafile Copies
=======================

Key     File S Completion Time Ckp SCN    Ckp Time        Sparse
------- ---- - --------------- ---------- --------------- ------
273     1    A 29-MAY-25       3310055    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-1_6j3ql96a
        Tag: ORACOPYBKUPONGCNV_LEVEL_0

274     3    A 29-MAY-25       3310333    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-3_6k3ql9c3
        Tag: ORACOPYBKUPONGCNV_LEVEL_0

275     4    A 29-MAY-25       3310521    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-4_6l3ql9hu
        Tag: ORACOPYBKUPONGCNV_LEVEL_0

283     5    A 29-MAY-25       2377077    21-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-5_6t3qlaa4
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 2, PDB Name: PDB$SEED

279     6    A 29-MAY-25       2377077    21-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-6_6p3ql9vu
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 2, PDB Name: PDB$SEED

288     7    A 29-MAY-25       3311276    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-7_723qlaif
        Tag: ORACOPYBKUPONGCNV_LEVEL_0

285     8    A 29-MAY-25       2377077    21-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-8_6v3qlae9
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 2, PDB Name: PDB$SEED

280     9    A 29-MAY-25       3310854    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-9_6q3qla21
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

276     10   A 29-MAY-25       3310587    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-10_6m3ql9lh
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

284     11   A 29-MAY-25       3311150    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-11_6u3qlacg
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

289     12   A 29-MAY-25       3311281    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-12_733qlaij
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

281     13   A 29-MAY-25       3310906    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-13_6r3qla52
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

277     14   A 29-MAY-25       3310662    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-14_6n3ql9ou
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

286     15   A 29-MAY-25       3311229    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-15_703qlaft
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

290     16   A 29-MAY-25       3311286    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-16_743qlaik
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

282     17   A 29-MAY-25       3311063    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-17_6s3qla7n
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

278     18   A 29-MAY-25       3310747    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-18_6o3ql9s9
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

287     19   A 29-MAY-25       3311242    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-19_713qlago
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

291     20   A 29-MAY-25       3311290    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-20_753qlail
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

251     21   A 28-MAY-25       3261788    28-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-21_5o3qkcd8
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

295     22   A 29-MAY-25       3261776    28-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-22_5i3qk79h
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

255     23   A 29-MAY-25       3266361    28-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-23_5v3qkh6o
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

266     24   A 29-MAY-25       3280010    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-24_693qkvfv
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

296     25   A 29-MAY-25       3261780    28-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-25_5j3qk79h
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

257     26   A 29-MAY-25       3270370    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-26_603qklqo
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

268     27   A 29-MAY-25       3280164    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-27_6a3qkvj9
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

297     28   A 29-MAY-25       3261784    28-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-28_5k3qk79h
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

258     29   A 29-MAY-25       3270566    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-29_613qkm09
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

259     30   A 29-MAY-25       3270571    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-30_623qkm0g
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

267     31   A 29-MAY-25       3280168    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-31_6b3qkvj9
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

249     32   A 28-MAY-25       3261793    28-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-32_5p3qkcd9
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

250     33   A 28-MAY-25       3261797    28-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-33_5q3qkcd9
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

260     34   A 29-MAY-25       3270587    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-34_633qkm1b
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

269     35   A 29-MAY-25       3284192    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-35_6c3ql412
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

252     36   A 28-MAY-25       3261801    28-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-36_5r3qkcda
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

261     37   A 29-MAY-25       3275627    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-37_643qkqjf
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

270     38   A 29-MAY-25       3297172    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-38_6d3ql47q
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

262     39   A 29-MAY-25       3275722    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-39_653qkqnn
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

271     40   A 29-MAY-25       3297259    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-40_6e3ql4b5
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

253     41   A 29-MAY-25       3266273    28-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-41_5s3qkh37
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

264     42   A 29-MAY-25       3275738    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-42_663qkqoq
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

272     43   A 29-MAY-25       3297314    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-43_6f3ql4bo
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

254     44   A 29-MAY-25       3266318    28-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-44_5t3qkh4m
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

292     45   A 29-MAY-25       3309950    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-45_6g3ql91c
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

256     46   A 29-MAY-25       3266357    28-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-46_5u3qkh6o
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

263     47   A 29-MAY-25       3275799    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-47_673qkqr5
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

265     48   A 29-MAY-25       3279927    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-48_683qkvb4
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

293     49   A 29-MAY-25       3309965    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-49_6h3ql91s
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

294     50   A 29-MAY-25       3310038    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-50_6i3ql955
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3


....
. Changer la base de données pour copier pour exécuter la restauration sans la restauration de la base de données.
+
....

RMAN> switch database to copy;

Starting implicit crosscheck backup at 29-MAY-25
allocated channel: ORA_DISK_1
channel ORA_DISK_1: SID=12 device type=DISK
Crosschecked 20 objects
Finished implicit crosscheck backup at 29-MAY-25

Starting implicit crosscheck copy at 29-MAY-25
using channel ORA_DISK_1
Crosschecked 49 objects
Finished implicit crosscheck copy at 29-MAY-25

searching for all files in the recovery area
cataloging files...
cataloging done

List of Cataloged Files
=======================
File Name: /nfsgcnv/archlog/NTAP/archivelog/2025_05_29/o1_mf_1_27_n3jzbgh2_.arc
File Name: /nfsgcnv/archlog/NTAP/autobackup/2025_05_29/o1_mf_s_1202395822_n3jx1hnf_.bkp

datafile 1 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-1_6j3ql96a"
datafile 3 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-3_6k3ql9c3"
datafile 4 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-4_6l3ql9hu"
datafile 5 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-5_6t3qlaa4"
datafile 6 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-6_6p3ql9vu"
datafile 7 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-7_723qlaif"
datafile 8 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-8_6v3qlae9"
datafile 9 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-9_6q3qla21"
datafile 10 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-10_6m3ql9lh"
datafile 11 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-11_6u3qlacg"
datafile 12 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-12_733qlaij"
datafile 13 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-13_6r3qla52"
datafile 14 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-14_6n3ql9ou"
datafile 15 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-15_703qlaft"
datafile 16 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-16_743qlaik"
datafile 17 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-17_6s3qla7n"
datafile 18 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-18_6o3ql9s9"
datafile 19 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-19_713qlago"
datafile 20 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-20_753qlail"
datafile 21 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-21_5o3qkcd8"
datafile 22 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-22_5i3qk79h"
datafile 23 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-23_5v3qkh6o"
datafile 24 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-24_693qkvfv"
datafile 25 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-25_5j3qk79h"
datafile 26 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-26_603qklqo"
datafile 27 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-27_6a3qkvj9"
datafile 28 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-28_5k3qk79h"
datafile 29 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-29_613qkm09"
datafile 30 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-30_623qkm0g"
datafile 31 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-31_6b3qkvj9"
datafile 32 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-32_5p3qkcd9"
datafile 33 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-33_5q3qkcd9"
datafile 34 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-34_633qkm1b"
datafile 35 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-35_6c3ql412"
datafile 36 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-36_5r3qkcda"
datafile 37 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-37_643qkqjf"
datafile 38 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-38_6d3ql47q"
datafile 39 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-39_653qkqnn"
datafile 40 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-40_6e3ql4b5"
datafile 41 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-41_5s3qkh37"
datafile 42 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-42_663qkqoq"
datafile 43 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-43_6f3ql4bo"
datafile 44 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-44_5t3qkh4m"
datafile 45 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-45_6g3ql91c"
datafile 46 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-46_5u3qkh6o"
datafile 47 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-47_673qkqr5"
datafile 48 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-48_683qkvb4"
datafile 49 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-49_6h3ql91s"
datafile 50 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-50_6i3ql955"


....
. Exécutez la restauration Oracle jusqu'au dernier journal d'archivage disponible dans la zone de récupération flash.
+
....

RMAN> run {
2> set until sequence=28;
3> recover database;
4> }

executing command: SET until clause

Starting recover at 29-MAY-25
using channel ORA_DISK_1
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00011: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-11_6u3qlacg
destination for restore of datafile 00025: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-25_5j3qk79h
destination for restore of datafile 00036: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-36_5r3qkcda
destination for restore of datafile 00046: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-46_5u3qkh6o
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/773qm6l7_231_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/773qm6l7_231_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00012: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-12_733qlaij
destination for restore of datafile 00028: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-28_5k3qk79h
destination for restore of datafile 00041: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-41_5s3qkh37
destination for restore of datafile 00044: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-44_5t3qkh4m
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7a3qm6l7_234_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7a3qm6l7_234_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:02
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00015: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-15_703qlaft
destination for restore of datafile 00029: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-29_613qkm09
destination for restore of datafile 00039: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-39_653qkqnn
destination for restore of datafile 00048: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-48_683qkvb4
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/783qm6l7_232_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/783qm6l7_232_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00019: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-19_713qlago
destination for restore of datafile 00031: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-31_6b3qkvj9
destination for restore of datafile 00043: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-43_6f3ql4bo
destination for restore of datafile 00050: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-50_6i3ql955
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/793qm6l7_233_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/793qm6l7_233_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00010: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-10_6m3ql9lh
destination for restore of datafile 00021: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-21_5o3qkcd8
destination for restore of datafile 00032: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-32_5p3qkcd9
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7d3qm6l9_237_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7d3qm6l9_237_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00014: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-14_6n3ql9ou
destination for restore of datafile 00023: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-23_5v3qkh6o
destination for restore of datafile 00034: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-34_633qkm1b
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7e3qm6l9_238_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7e3qm6l9_238_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00016: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-16_743qlaik
destination for restore of datafile 00030: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-30_623qkm0g
destination for restore of datafile 00042: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-42_663qkqoq
destination for restore of datafile 00047: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-47_673qkqr5
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7b3qm6l9_235_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7b3qm6l9_235_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00020: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-20_753qlail
destination for restore of datafile 00035: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-35_6c3ql412
destination for restore of datafile 00045: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-45_6g3ql91c
destination for restore of datafile 00049: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-49_6h3ql91s
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7c3qm6l9_236_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7c3qm6l9_236_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00001: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-1_6j3ql96a
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7j3qm6la_243_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7j3qm6la_243_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00009: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-9_6q3qla21
destination for restore of datafile 00022: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-22_5i3qk79h
destination for restore of datafile 00033: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-33_5q3qkcd9
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7g3qm6l9_240_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7g3qm6l9_240_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00013: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-13_6r3qla52
destination for restore of datafile 00026: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-26_603qklqo
destination for restore of datafile 00037: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-37_643qkqjf
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7h3qm6la_241_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7h3qm6la_241_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00017: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-17_6s3qla7n
destination for restore of datafile 00027: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-27_6a3qkvj9
destination for restore of datafile 00040: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-40_6e3ql4b5
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7i3qm6la_242_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7i3qm6la_242_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00018: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-18_6o3ql9s9
destination for restore of datafile 00024: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-24_693qkvfv
destination for restore of datafile 00038: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-38_6d3ql47q
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7f3qm6l9_239_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7f3qm6l9_239_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00004: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-4_6l3ql9hu
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7l3qm6la_245_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7l3qm6la_245_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:02
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00007: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-7_723qlaif
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7p3qm6lb_249_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7p3qm6lb_249_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00003: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-3_6k3ql9c3
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7k3qm6la_244_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7k3qm6la_244_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:03

starting media recovery

archived log for thread 1 with sequence 27 is already on disk as file /nfsgcnv/archlog/NTAP/archivelog/2025_05_29/o1_mf_1_27_n3jzbgh2_.arc
archived log file name=/nfsgcnv/archlog/NTAP/archivelog/2025_05_29/o1_mf_1_27_n3jzbgh2_.arc thread=1 sequence=27
media recovery complete, elapsed time: 00:00:01
Finished recover at 29-MAY-25

RMAN>
RMAN> exit


Recovery Manager complete.

....
+

NOTE: Pour une récupération plus rapide, activez les sessions parallèles avec le paramètre Recovery_parallélisme ou spécifiez le degré de parallélisme dans la commande Recovery pour la restauration de la base de données : `RECOVER DATABASE PARALLEL (DEGREE d INSTANCES DEFAULT);`. En général, les degrés de parallélisme doivent être égaux au nombre de cœurs de CPU sur l'hôte.

. Quittez RMAN, connectez-vous à Oracle en tant qu'utilisateur oracle via sqlplus pour ouvrir la base de données et réinitialiser le journal après une restauration incomplète.
+
....

SQL> select name, open_mode from v$database;

NAME      OPEN_MODE
--------- --------------------
NTAP      MOUNTED

SQL> select instance_name, host_name from v$instance;

INSTANCE_NAME
----------------
HOST_NAME
----------------------------------------------------------------
NTAP
orap


SQL> select member from v$logfile;

MEMBER
--------------------------------------------------------------------------------
+DATA/NTAP/ONLINELOG/group_3.264.1201727425
+LOGS/NTAP/ONLINELOG/group_3.259.1201727433
+DATA/NTAP/ONLINELOG/group_2.263.1201727425
+LOGS/NTAP/ONLINELOG/group_2.257.1201727431
+DATA/NTAP/ONLINELOG/group_1.262.1201727425
+LOGS/NTAP/ONLINELOG/group_1.258.1201727433

6 rows selected.

SQL> alter database rename file '+LOGS/NTAP/ONLINELOG/group_1.258.1201727433' to '/nfsgcnv/oracopy/group_1.258.1201727433';

Database altered.

SQL> alter database rename file '+DATA/NTAP/ONLINELOG/group_1.262.1201727425' to '/nfsgcnv/oracopy/group_1.262.1201727425';

Database altered.

SQL> alter database rename file '+LOGS/NTAP/ONLINELOG/group_2.257.1201727431' to '/nfsgcnv/oracopy/group_2.257.1201727431';

Database altered.

SQL> alter database rename file '+DATA/NTAP/ONLINELOG/group_2.263.1201727425' to '/nfsgcnv/oracopy/group_2.263.1201727425';

Database altered.

SQL> alter database rename file '+LOGS/NTAP/ONLINELOG/group_3.259.1201727433' to '/nfsgcnv/oracopy/group_3.259.1201727433';

Database altered.

SQL> alter database rename file '+DATA/NTAP/ONLINELOG/group_3.264.1201727425' to '/nfsgcnv/oracopy/group_3.264.1201727425';

Database altered.

SQL> alter database open resetlogs;

Database altered.

SQL> show pdbs

    CON_ID CON_NAME                       OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
         2 PDB$SEED                       READ ONLY  NO
         3 NTAP_PDB1                      READ WRITE NO
         4 NTAP_PDB2                      READ WRITE NO
         5 NTAP_PDB3                      READ WRITE NO

....
. Validez que les fichiers de base de données sont désormais sur le système de fichiers de sauvegarde sur GCNV.
+
....

SQL> select name from v$datafile;

NAME
--------------------------------------------------------------------------------
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-1_6j3ql96a
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-3_6k3ql9c3
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-4_6l3ql9hu
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-5_6t3qlaa4
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-6_6p3ql9vu
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-7_723qlaif
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-8_6v3qlae9
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-9_6q3qla21
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-10_6m3ql9lh
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-11_6u3qlacg
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-12_733qlaij

NAME
--------------------------------------------------------------------------------
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-13_6r3qla52
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-14_6n3ql9ou
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-15_703qlaft
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-16_743qlaik
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-17_6s3qla7n
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-18_6o3ql9s9
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-19_713qlago
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-20_753qlail
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-21_5o3qkcd8
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-22_5i3qk79h
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-23_5v3qkh6o

NAME
--------------------------------------------------------------------------------
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-24_693qkvfv
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-25_5j3qk79h
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-26_603qklqo
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-27_6a3qkvj9
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-28_5k3qk79h
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-29_613qkm09
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-30_623qkm0g
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-31_6b3qkvj9
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-32_5p3qkcd9
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-33_5q3qkcd9
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-34_633qkm1b

NAME
--------------------------------------------------------------------------------
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-35_6c3ql412
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-36_5r3qkcda
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-37_643qkqjf
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-38_6d3ql47q
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-39_653qkqnn
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-40_6e3ql4b5
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-41_5s3qkh37
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-42_663qkqoq
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-43_6f3ql4bo
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-44_5t3qkh4m
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-45_6g3ql91c

NAME
--------------------------------------------------------------------------------
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-46_5u3qkh6o
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-47_673qkqr5
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-48_683qkvb4
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-49_6h3ql91s
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-50_6i3ql955

49 rows selected.

SQL> select member from v$logfile;

MEMBER
--------------------------------------------------------------------------------
/nfsgcnv/oracopy/group_3.264.1201727425
/nfsgcnv/oracopy/group_3.259.1201727433
/nfsgcnv/oracopy/group_2.263.1201727425
/nfsgcnv/oracopy/group_2.257.1201727431
/nfsgcnv/oracopy/group_1.262.1201727425
/nfsgcnv/oracopy/group_1.258.1201727433

6 rows selected.


SQL> select name from v$controlfile;

NAME
--------------------------------------------------------------------------------
/nfsgcnv/oracopy/NTAP.ctl


....
. Autres tâches post-restauration
+
....

- Add GCNV NFS mount to fstab of the standby DB server if recovering from a standby DB server so that the NFS file system will be mounted when DB server host rebooted.

- Update pfile restored to $ORACLE_HOME/dbs directory and create spfile from pfile.

....
. , le stockage principal doit être importé sur ce serveur. Il est également nécessaire de relocaliser les fichiers de contrôle Oracle et les fichiers journaux en ligne actuels du montage NFS GCNV vers le stockage principal, ce qui peut être réalisé en quelques minutes d'indisponibilité.


Cela termine la récupération ponctuelle de la base de données Oracle VLDB à partir de la copie d'image de sauvegarde sur le système de fichiers NFS GCNV vers le même serveur de base de données principal ou un serveur de base de données de secours.

====


=== Cloner une base de données Oracle VLDB pour d'autres cas d'utilisation à partir de la copie de l'image de sauvegarde

[%collapsible%open]
====
Cloner une nouvelle base de données Oracle VLDB à partir de l'image de sauvegarde sur GCNV est similaire à la restauration instantanée de la base de données principale sur un nouveau serveur. L'équipe d'ingénierie NetApp Solutions fournit une boîte à outils d'automatisation pour simplifier l'ensemble des processus et assurer une mise en œuvre rapide (en quelques minutes) et sans effort.

La boîte à outils d'automatisation suivante contient un playbook qui peut être utilisé pour créer ou actualiser des clones d'un Oracle VLDB à partir d'une copie d'image de sauvegarde de base de données principale stockée sur le stockage GCNV via un montage NFS pour une gestion complète du cycle de vie des clones. Pour plus de détails, reportez-vous à la documentation : link:https://docs.netapp.com/us-en/netapp-solutions/databases/automation_ora_bkup_clone.html["Cycle de vie automatisé du clone Oracle VLDB avec sauvegarde d'image sur serveur"^] .

[source, cli]
----
https://bitbucket.ngage.netapp.com/mvc/projects/NS-BB/repos/na_oracle_bkup_clone/browse
----

NOTE: La boîte à outils est uniquement accessible à l'utilisateur interne de NetApp avec un accès au bitbucket pour le moment. Pour les utilisateurs externes intéressés, veuillez demander l'accès à l'équipe de gestion de compte ou contacter l'équipe d'ingénierie des solutions NetApp.

====


== Où trouver des informations complémentaires

Pour en savoir plus sur les informations fournies dans ce document, consultez ces documents et/ou sites web :

* Le service de stockage de fichiers haute performance de NetApp, dans Google Cloud
+
link:https://cloud.google.com/netapp-volumes?hl=en["https://cloud.google.com/netapp-volumes?hl=en"^]

* RMAN : stratégies de sauvegarde incrémentale fusionnées (Doc ID 745798.1)
+
link:https://support.oracle.com/knowledge/Oracle%20Database%20Products/745798_1.html["https://support.oracle.com/knowledge/Oracle%20Database%20Products/745798_1.html"^]

* Guide de l'utilisateur de la sauvegarde et de la restauration RMAN
+
link:https://docs.oracle.com/en/database/oracle/oracle-database/19/bradv/getting-started-rman.html["https://docs.oracle.com/en/database/oracle/oracle-database/19/bradv/getting-started-rman.html"^]


