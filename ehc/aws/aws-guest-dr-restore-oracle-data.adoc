---
sidebar: sidebar 
permalink: ehc/aws/aws-guest-dr-restore-oracle-data.html 
keywords: Oracle application data, VMware Cloud Services, aws, mount NFS volumes, Oracle Server 
summary: 'Le processus suivant explique comment restaurer les données d"application Oracle dans VMware Cloud Services dans AWS en cas d"incident rendant le site inutilisable.' 
---
= Restaurez les données de l'application Oracle
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./../../media/


link:aws-guest-dr-restore-sql-data.html["Précédent : restauration des données d'application SQL Server."]

Le processus suivant explique comment restaurer les données d'application Oracle dans VMware Cloud Services dans AWS en cas d'incident rendant le site inutilisable.

Pour continuer les étapes de récupération, suivez les conditions préalables suivantes :

. La machine virtuelle du serveur Oracle Linux a été restaurée dans le SDDC VMware Cloud à l'aide de Veeam Full Restore.
. Un serveur SnapCenter secondaire a été établi et la base de données SnapCenter et les fichiers de configuration ont été restaurés à l'aide des étapes décrites dans cette section link:aws-guest-dr-snapcenter-db-backup.html#snapcenter-backup-and-restore-process-summary["Récapitulatif du processus de sauvegarde et de restauration SnapCenter."]


Un résumé du processus de restauration des données de l'application Oracle est le suivant :

. Configurer la machine virtuelle en préparation du processus de restauration.
. Configurez FSX pour l'accès iSCSI.
. Configuration de la VM Linux pour l'accès NFS
. Reliez la base de données SQL Server et la placez en ligne.
. Vérifiez la communication entre SnapCenter et le plug-in SnapCenter SQL Server.


Un résumé du processus de basculement d'Oracle Server est le suivant :

. Restaurez la machine virtuelle Oracle dans le cloud VMware à l'aide de Veeam.
. Nettoyez la machine virtuelle avant de préparer le processus de restauration :
+
.. Modifiez les adresses IP si nécessaire.
.. Ajoutez le système au DNS avec un FQDN identique à l'original.


. Configurez FSX pour l'accès NFS.
. Montez les volumes NFS sur Oracle Linux Server.




== Configurer FSX pour la restauration Oracle – interrompre la relation SnapMirror

Pour rendre les volumes de stockage secondaire hébergés sur l'instance FSxN accessibles aux serveurs Oracle, vous devez d'abord interrompre la relation SnapMirror existante.

. Après avoir ouvert une session dans la CLI FSX, exécutez la commande suivante pour afficher les volumes filtrés par le nom correct.
+
....
FSx-Dest::> volume show -volume VolumeName*
....
+
image:dr-vmc-aws-image77.png["Erreur : image graphique manquante"]

. Exécutez la commande suivante pour interrompre les relations SnapMirror existantes.
+
....
FSx-Dest::> snapmirror break -destination-path DestSVM:DestVolName
....
+
image:dr-vmc-aws-image78.png["Erreur : image graphique manquante"]

. Mettez à jour le chemin de jonction dans le client Web Amazon FSX :
+
image:dr-vmc-aws-image79.png["Erreur : image graphique manquante"]

. Ajoutez le nom du chemin de jonction et cliquez sur mettre à jour. Préciser cette Junction path lors du montage du volume NFS depuis le serveur Oracle.
+
image:dr-vmc-aws-image80.png["Erreur : image graphique manquante"]





== Montez les volumes NFS sur Oracle Server

Dans Cloud Manager, vous pouvez obtenir la commande mount avec l'adresse IP correcte de la LIF NFS pour le montage des volumes NFS qui contiennent les fichiers et les journaux de la base de données Oracle.

. Dans Cloud Manager, accédez à la liste des volumes de votre cluster FSX.
+
image:dr-vmc-aws-image81.png["Erreur : image graphique manquante"]

. Dans le menu d'action, sélectionnez la commande Mount pour afficher et copier la commande mount à utiliser sur notre serveur Oracle Linux.
+
image:dr-vmc-aws-image82.png["Erreur : image graphique manquante"]

+
image:dr-vmc-aws-image83.png["Erreur : image graphique manquante"]

. Montez le système de fichiers NFS sur le serveur Oracle Linux. Les répertoires de montage du partage NFS existent déjà sur l'hôte Oracle Linux.
. À partir du serveur Oracle Linux, utilisez la commande mount pour monter les volumes NFS.
+
....
FSx-Dest::> mount -t oracle_server_ip:/junction-path
....
+
Répétez cette étape pour chaque volume associé aux bases de données Oracle.

+

NOTE: Pour rendre le montage NFS persistant au redémarrage, modifiez le `/etc/fstab` fichier à inclure les commandes de montage.

. Redémarrez le serveur Oracle. Les bases de données Oracle doivent démarrer normalement et être disponibles pour une utilisation.


link:aws-guest-dr-failback.html["Suivant : retour arrière."]
